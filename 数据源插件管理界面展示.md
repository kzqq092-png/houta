# FactorWeave-Quant  数据源插件管理界面展示

## 概述

FactorWeave-Quant  已经完整实现了数据源插件化管理的用户界面，包括插件管理、配置和监控功能。以下是各个界面组件的详细说明。

## 1. 增强版插件管理器对话框 (EnhancedPluginManagerDialog)

**文件位置:** `gui/dialogs/enhanced_plugin_manager_dialog.py`

### 主要功能标签页：

#### 📋 数据源插件管理标签页
- **插件列表表格**：显示所有已注册的数据源插件
  - 插件名称
  - 运行状态（🟢 活跃 / 🔴 未连接）
  - 支持的资产类型（STOCK, FUTURES, CRYPTO, FOREX, BOND）
  - 健康分数（0.0-1.0）
  - 优先级排序
  - 操作按钮（⚙️ 配置 / 🧪 测试）

- **插件详情面板**：
  - 插件ID、版本、作者信息
  - 支持的资产类型和数据类型
  - 性能指标（总请求数、成功率、平均响应时间、健康分数）

- **路由配置面板**：
  - 资产类型选择下拉框
  - 拖拽式优先级列表配置
  - 保存优先级配置功能

#### 🔧 通用插件管理标签页
- 所有类型插件的统一管理
- 启用/禁用功能
- 插件过滤和搜索

#### 📊 情绪数据源插件标签页  
- 情绪分析插件配置
- 权重和优先级设置
- 连接测试功能

#### 📈 状态监控标签页
- 实时状态监控
- 性能指标显示
- 通知和警报

#### 🛒 插件市场标签页
- 插件搜索和安装
- 版本管理
- 评分和下载统计

### 界面特性：
- **响应式布局**：左右分割面板，可拖拽调整
- **实时刷新**：30秒自动刷新状态
- **批量操作**：支持全部启用/禁用
- **配置导入导出**：JSON格式配置文件
- **状态指示**：丰富的图标和颜色状态提示

## 2. 数据源插件配置对话框 (DataSourcePluginConfigDialog)

**文件位置:** `gui/dialogs/data_source_plugin_config_dialog.py`

### 功能特性：
- **参数配置界面**：动态生成插件参数表单
- **连接测试**：实时测试插件连接状态
- **配置验证**：参数有效性检查
- **保存/应用**：配置持久化

### 支持的配置类型：
- 文本输入框（API密钥、URL等）
- 数值输入框（超时时间、重试次数等）
- 下拉选择框（数据源类型等）
- 复选框（功能启用/禁用）
- 滑块控件（权重、优先级等）

## 3. 数据源状态监控组件 (DataSourceStatusWidget)

**文件位置:** `gui/widgets/data_source_status_widget.py`

### 监控功能：
- **实时状态显示**：
  - 🟢 在线/正常
  - 🟡 警告/降级
  - 🔴 离线/错误
  - 🔵 未知/初始化中

- **性能指标**：
  - 响应时间趋势图
  - 成功率统计
  - 请求量监控
  - 错误率分析

- **通知系统**：
  - 状态变化通知
  - 错误和警报信息
  - 日志记录和查看

### 监控数据类型：
- 数据源连接状态
- API请求成功率
- 响应时间统计
- 错误日志记录
- 缓存命中率
- 限流状态监控

## 4. 界面集成方式

### 主系统集成：
数据源插件管理界面已集成到FactorWeave-Quant 主系统中：

1. **菜单栏访问**：工具 → 插件管理 → 数据源插件
2. **快捷方式**：Ctrl+Shift+P 打开插件管理器
3. **状态栏图标**：实时显示插件状态

### 事件驱动更新：
- 插件状态变化自动更新界面
- 配置修改实时反映到路由器
- 性能指标定时刷新
- 错误和警告即时通知

## 5. 界面截图说明

### 数据源插件管理主界面：
```
┌─────────────────────────────────────────────────────────────────┐
│ 🔧 插件管理器                               🔄 📤 📥           │
├─────────────────────────────────────────────────────────────────┤
│ [通用插件] [情绪数据源] [数据源插件] [状态监控] [插件市场]      │
├─────────────────────────────────────────────────────────────────┤
│ 🔌 数据源插件管理                              🔄 刷新          │
│ 管理数据源插件的加载、配置和路由优先级                          │
├─────────────────────────────────┬───────────────────────────────┤
│ 已注册的数据源插件               │ 插件详情                      │
│ ┌─────────────────────────────┐ │ ┌─────────────────────────────┐ │
│ │插件名称 │状态│资产│分数│优先│ │ │插件ID: futures_plugin       │ │
│ │期货插件 │🟢 │期货│0.95│ 1  │ │ │版本: 1.0.0                 │ │
│ │数字货币 │🟢 │加密│0.88│ 2  │ │ │作者: HIkyuu团队             │ │
│ │股票插件 │🟡 │股票│0.76│ 3  │ │ │支持资产: FUTURES           │ │
│ └─────────────────────────────┘ │ │支持数据: K线,实时行情       │ │
│                                 │ └─────────────────────────────┘ │
│ 📁 加载插件  🗑️ 卸载插件      │                               │
│                                 │ 路由配置                      │
│                                 │ ┌─────────────────────────────┐ │
│                                 │ │资产类型: [FUTURES ▼]       │ │
│                                 │ │优先级列表:                  │ │
│                                 │ │  1. 期货插件                │ │
│                                 │ │  2. 备用插件                │ │
│                                 │ │     [💾 保存优先级]         │ │
│                                 │ └─────────────────────────────┘ │
├─────────────────────────────────┴───────────────────────────────┤
│ 就绪                           插件总数: 5 | 活跃插件: 3       │
│                                     [应用] [确定] [取消]        │
└─────────────────────────────────────────────────────────────────┘
```

### 数据源配置对话框：
```
┌─────────────────────────────────────────────────────────────┐
│ ⚙️ 期货数据插件配置                          ❌           │
├─────────────────────────────────────────────────────────────┤
│ 📋 基本信息                                                │
│ 插件名称: 期货数据插件                                      │
│ 版本: 1.0.0                                               │
│ 状态: 🟢 已连接                                           │
├─────────────────────────────────────────────────────────────┤
│ ⚙️ 配置参数                                               │
│ API地址:     [https://api.futures.com        ]             │
│ API密钥:     [**********************          ]             │
│ 超时时间:    [30] 秒                                       │
│ 重试次数:    [3] 次                                        │
│ 启用缓存:    ☑️                                           │
│ 缓存时间:    [300] 秒                                      │
├─────────────────────────────────────────────────────────────┤
│ 🧪 连接测试                                               │
│ 最后测试: 2024-08-08 20:30:15                             │
│ 测试结果: ✅ 连接成功 (响应时间: 245ms)                    │
│                                    [🧪 测试连接]            │
├─────────────────────────────────────────────────────────────┤
│                              [保存] [应用] [取消]           │
└─────────────────────────────────────────────────────────────┘
```

### 状态监控组件：
```
┌─────────────────────────────────────────────────────────────┐
│ 📊 数据源状态监控                           🔄 刷新         │
├─────────────────────────────────────────────────────────────┤
│ 📈 实时状态                                                │
│ ┌─────────┬─────────┬─────────┬─────────┬─────────┐         │
│ │期货数据 │数字货币 │股票数据 │新闻情绪 │社交情绪 │         │
│ │   🟢   │   🟢   │   🟡   │   🔴   │   🟢   │         │
│ │ 正常   │ 正常   │ 警告   │ 离线   │ 正常   │         │
│ └─────────┴─────────┴─────────┴─────────┴─────────┘         │
├─────────────────────────────────────────────────────────────┤
│ 📊 性能指标                                                │
│ 总请求数: 15,432    成功率: 98.5%    平均响应: 234ms      │
│ 活跃源: 4/5        错误率: 1.5%     缓存命中: 87.2%       │
├─────────────────────────────────────────────────────────────┤
│ 🔔 最新通知                                [清除] [导出]    │
│ • 20:35:12 期货插件连接恢复正常                            │
│ • 20:32:45 新闻情绪源连接超时                              │
│ • 20:30:33 数字货币插件性能优异                            │
└─────────────────────────────────────────────────────────────┘
```

## 6. 使用方式

### 通过演示程序查看界面：
```bash
# 运行UI演示程序
python test_plugin_ui_demo.py
```

### 在主系统中访问：
1. 启动FactorWeave-Quant 主程序
2. 菜单栏：工具 → 插件管理
3. 选择"数据源插件"标签页

### 编程方式调用：
```python
from gui.dialogs.enhanced_plugin_manager_dialog import EnhancedPluginManagerDialog

# 创建插件管理器对话框
dialog = EnhancedPluginManagerDialog()

# 切换到数据源插件标签页
dialog.tab_widget.setCurrentIndex(2)  # 数据源插件标签页

# 显示对话框
dialog.exec_()
```

## 7. 界面功能总结

### ✅ 已实现功能：
- 🔧 完整的插件管理界面
- ⚙️ 插件配置对话框
- 📊 实时状态监控
- 🔀 路由优先级配置
- 🧪 插件连接测试
- 📋 性能指标显示
- 🔔 事件通知系统
- 💾 配置导入导出

### 🎨 界面特色：
- 现代化Material Design风格
- 响应式布局适配
- 丰富的图标和颜色指示
- 实时数据更新
- 用户友好的交互体验

### 📱 兼容性：
- 支持Windows/Linux/macOS
- PyQt5界面框架
- 高DPI屏幕适配
- 主题样式支持

---

**注意：** 所有界面组件都已完整实现并集成到FactorWeave-Quant 系统中，支持完整的数据源插件管理功能。 