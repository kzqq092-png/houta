# è‚¡ç¥¨æ± Tooltipæ‚¬åœåŠŸèƒ½å®ç°æŠ¥å‘Š

## ğŸ” ç”¨æˆ·éœ€æ±‚

### ç”¨æˆ·åé¦ˆ
**ç”¨æˆ·åé¦ˆ**ï¼š"è‚¡ç¥¨æ± å†…å®¹è¢«é®æŒ¡äº†ï¼Œèƒ½å¦åœ¨è‚¡ç¥¨æ± åŠ ä¸€ä¸ªå½“é¼ æ ‡æ”¾åœ¨ä¸Šé¢å¯ä»¥æ‚¬æµ®æ˜¾ç¤ºæ‰€æœ‰å†…å®¹"

### é—®é¢˜åˆ†æ
- **æ˜¾ç¤ºç©ºé—´é™åˆ¶**ï¼šç­–ç•¥ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸé«˜åº¦æœ‰é™ï¼ˆ60pxï¼‰ï¼Œè‚¡ç¥¨æ± ä¿¡æ¯å®¹æ˜“è¢«æˆªæ–­
- **ä¿¡æ¯å®Œæ•´æ€§**ï¼šç”¨æˆ·æ— æ³•æŸ¥çœ‹è¢«é®æŒ¡çš„è‚¡ç¥¨è¯¦æƒ…
- **ç”¨æˆ·ä½“éªŒ**ï¼šéœ€è¦ç›´è§‚çš„æ–¹å¼æŸ¥çœ‹å®Œæ•´è‚¡ç¥¨æ± ä¿¡æ¯

## ğŸ¯ è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒè®¾è®¡æ€è·¯
**é¼ æ ‡æ‚¬åœTooltip**ï¼šå½“ç”¨æˆ·å°†é¼ æ ‡æ‚¬åœåœ¨è‚¡ç¥¨æ± æ ‡ç­¾ä¸Šæ—¶ï¼Œæ˜¾ç¤ºåŒ…å«å®Œæ•´è‚¡ç¥¨æ± ä¿¡æ¯çš„è¯¦ç»†æç¤ºæ¡†ã€‚

### åŠŸèƒ½ç‰¹ç‚¹
1. **ä¿¡æ¯å®Œæ•´**ï¼šæ˜¾ç¤ºæ‰€æœ‰åˆ†æè‚¡ç¥¨çš„è¯¦ç»†ä¿¡æ¯
2. **ç»“æ„æ¸…æ™°**ï¼šé‡‡ç”¨åˆ†ç»„ã€åˆ†è¡Œæ˜¾ç¤ºï¼Œæ˜“äºé˜…è¯»
3. **ç»Ÿè®¡ä¿¡æ¯**ï¼šåŒ…å«åˆ†ææ•°é‡ã€ç³»ç»Ÿæ€»æ•°ã€é‡‡æ ·æ¯”ä¾‹
4. **å®æ—¶æ›´æ–°**ï¼šéšç€è‚¡ç¥¨æ± æ•°æ®æ›´æ–°è€ŒåŒæ­¥æ›´æ–°

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. UIç»„ä»¶è®¾ç½®

**åŸºç¡€Tooltipé…ç½®**ï¼š
```python
# åœ¨create_strategy_info_sectionæ–¹æ³•ä¸­
self.stocks_value = QLabel("åŠ è½½ä¸­...")
self.stocks_value.setStyleSheet("color: #ecf0f1; font-size: 12px; font-weight: bold;")
# è®¾ç½®é¼ æ ‡æ‚¬åœæç¤ºå’Œæ–‡æœ¬çœç•¥
self.stocks_value.setWordWrap(False)  # ä¸è‡ªåŠ¨æ¢è¡Œ
self.stocks_value.setToolTip("è‚¡ç¥¨æ± è¯¦ç»†ä¿¡æ¯å°†åœ¨é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤º")  # é»˜è®¤æç¤º
```

### 2. æ™ºèƒ½è‚¡ç¥¨æ± æ˜¾ç¤ºæ›´æ–°

**æ ¸å¿ƒæ–¹æ³•å®ç°**ï¼š
```python
def _update_stock_pool_display(self, selected_codes, total_stocks):
    """æ›´æ–°è‚¡ç¥¨æ± æ˜¾ç¤ºï¼ŒåŒ…å«é€‰æ‹©çš„è‚¡ç¥¨æ•°é‡ä¿¡æ¯"""
    try:
        # è·å–è‚¡ç¥¨åç§°æ˜ å°„
        name_mapping = self.get_stock_name_mapping(selected_codes)
        
        # æ„å»ºå®Œæ•´çš„è‚¡ç¥¨ä¿¡æ¯åˆ—è¡¨ï¼ˆç”¨äºtooltipï¼‰
        full_stock_info_list = []
        for code in selected_codes:
            name = name_mapping.get(code, code)
            if name != code:
                full_stock_info_list.append(f"{name}({code})")
            else:
                full_stock_info_list.append(code)
        
        # æ„å»ºç®€åŒ–æ˜¾ç¤ºæ–‡æœ¬
        if len(selected_codes) <= 4:
            # å°‘é‡è‚¡ç¥¨ï¼Œæ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
            display_text = ", ".join(full_stock_info_list)
            if total_stocks > len(selected_codes):
                display_text += f" ç­‰{len(selected_codes)}åªï¼ˆå…±{total_stocks}åªï¼‰"
        else:
            # å¤šé‡è‚¡ç¥¨ï¼Œæ˜¾ç¤ºå‰3ä¸ªåŠ çœç•¥å·
            display_text = ", ".join(full_stock_info_list[:3]) + f" ç­‰{len(selected_codes)}åªï¼ˆå…±{total_stocks}åªï¼‰"
        
        # æ„å»ºè¯¦ç»†çš„tooltipä¿¡æ¯
        tooltip_lines = [
            f"ç­–ç•¥åˆ†æè‚¡ç¥¨æ± è¯¦æƒ…ï¼š",
            f"åˆ†ææ•°é‡ï¼š{len(selected_codes)} åªè‚¡ç¥¨",
            f"ç³»ç»Ÿæ€»æ•°ï¼š{total_stocks} åªè‚¡ç¥¨",
            f"é‡‡æ ·æ¯”ä¾‹ï¼š{(len(selected_codes)/total_stocks*100):.1f}%",
            "",
            "åŒ…å«è‚¡ç¥¨ï¼š"
        ]
        
        # å°†è‚¡ç¥¨ä¿¡æ¯åˆ†è¡Œæ˜¾ç¤ºï¼Œæ¯è¡Œæœ€å¤šæ˜¾ç¤º3åªè‚¡ç¥¨
        for i in range(0, len(full_stock_info_list), 3):
            line_stocks = full_stock_info_list[i:i+3]
            tooltip_lines.append("  " + ", ".join(line_stocks))
        
        if len(selected_codes) < total_stocks:
            tooltip_lines.append("")
            tooltip_lines.append("ğŸ’¡ æç¤ºï¼šå¯åœ¨è®¾ç½®ä¸­è°ƒæ•´åˆ†æè‚¡ç¥¨æ•°é‡")
            
        tooltip_text = "\n".join(tooltip_lines)
        
        # æ›´æ–°æ˜¾ç¤ºå’Œtooltip
        self.stocks_value.setText(display_text)
        self.stocks_value.setToolTip(tooltip_text)
        
    except Exception as e:
        logger.error(f"æ›´æ–°è‚¡ç¥¨æ± æ˜¾ç¤ºå¤±è´¥: {e}")
        # å‘ç”Ÿé”™è¯¯æ—¶è®¾ç½®é”™è¯¯æç¤º
        self.stocks_value.setToolTip(f"è‚¡ç¥¨æ± ä¿¡æ¯æ›´æ–°å¤±è´¥: {e}")
```

### 3. æ˜¾ç¤ºæ•ˆæœç¤ºä¾‹

#### ç®€åŒ–æ˜¾ç¤ºï¼ˆæ ‡ç­¾ä¸Šæ˜¾ç¤ºï¼‰
```
å¹³å®‰é“¶è¡Œ(sz000001), ä¸‡ç§‘A(sz000002), æµ¦å‘é“¶è¡Œ(sh600000) ç­‰10åªï¼ˆå…±156åªï¼‰
```

#### è¯¦ç»†Tooltipï¼ˆé¼ æ ‡æ‚¬åœæ˜¾ç¤ºï¼‰
```
ç­–ç•¥åˆ†æè‚¡ç¥¨æ± è¯¦æƒ…ï¼š
åˆ†ææ•°é‡ï¼š10 åªè‚¡ç¥¨
ç³»ç»Ÿæ€»æ•°ï¼š156 åªè‚¡ç¥¨
é‡‡æ ·æ¯”ä¾‹ï¼š6.4%

åŒ…å«è‚¡ç¥¨ï¼š
  å¹³å®‰é“¶è¡Œ(sz000001), ä¸‡ç§‘A(sz000002), æµ¦å‘é“¶è¡Œ(sh600000)
  æ‹›å•†é“¶è¡Œ(sh600036), sz300110, sz399439
  sz159918, sz301566, sz000858
  sh600519

ğŸ’¡ æç¤ºï¼šå¯åœ¨è®¾ç½®ä¸­è°ƒæ•´åˆ†æè‚¡ç¥¨æ•°é‡
```

## ğŸ“Š åŠŸèƒ½éªŒè¯

### æµ‹è¯•ç»“æœ
```
ğŸš€ è‚¡ç¥¨æ± TooltipåŠŸèƒ½æµ‹è¯•
==================================================
ğŸ–±ï¸ æµ‹è¯•è‚¡ç¥¨æ± tooltipåŠŸèƒ½...
   âœ… ç­–ç•¥æ€§èƒ½æ ‡ç­¾é¡µåˆ›å»ºæˆåŠŸ
   âœ… è‚¡ç¥¨æ± æ ‡ç­¾å·²åˆ›å»ºï¼Œåˆå§‹tooltip: è‚¡ç¥¨æ± è¯¦ç»†ä¿¡æ¯å°†åœ¨é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤º
   ğŸ”„ æµ‹è¯•è‚¡ç¥¨æ± æ˜¾ç¤ºæ›´æ–°...
   ğŸ“Š æ˜¾ç¤ºæ–‡æœ¬: å¹³å®‰é“¶è¡Œ(sz000001), ä¸‡ç§‘A(sz000002), æµ¦å‘é“¶è¡Œ(sh600000) ç­‰10åªï¼ˆå…±156åªï¼‰
   ğŸ’¡ Tooltipå†…å®¹:
       ç­–ç•¥åˆ†æè‚¡ç¥¨æ± è¯¦æƒ…ï¼š
       åˆ†ææ•°é‡ï¼š10 åªè‚¡ç¥¨
       ç³»ç»Ÿæ€»æ•°ï¼š156 åªè‚¡ç¥¨
       é‡‡æ ·æ¯”ä¾‹ï¼š6.4%

       åŒ…å«è‚¡ç¥¨ï¼š
         å¹³å®‰é“¶è¡Œ(sz000001), ä¸‡ç§‘A(sz000002), æµ¦å‘é“¶è¡Œ(sh600000)
         æ‹›å•†é“¶è¡Œ(sh600036), sz300110, sz399439
         sz159918, sz301566, sz000858
         sh600519
   âœ… TooltipåŒ…å«æ‰€æœ‰å¿…è¦ä¿¡æ¯
```

### ä¸åŒåœºæ™¯æµ‹è¯•
1. **4åªè‚¡ç¥¨åœºæ™¯**ï¼šæ˜¾ç¤ºå®Œæ•´è‚¡ç¥¨ä¿¡æ¯ï¼ŒtooltipåŒ…å«è¯¦ç»†ç»Ÿè®¡
2. **10åªè‚¡ç¥¨åœºæ™¯**ï¼šæ˜¾ç¤ºå‰3åª+çœç•¥å·ï¼Œtooltipåˆ†è¡Œæ˜¾ç¤ºæ‰€æœ‰è‚¡ç¥¨
3. **20åªè‚¡ç¥¨åœºæ™¯**ï¼šé«˜åº¦ç²¾ç®€æ˜¾ç¤ºï¼Œtooltipåˆ†å¤šè¡Œè¯¦ç»†å±•ç¤º

## ğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹å–„

### æ”¹å–„å‰
- âŒ **ä¿¡æ¯è¢«æˆªæ–­**ï¼šè‚¡ç¥¨æ± å†…å®¹åœ¨æœ‰é™ç©ºé—´å†…è¢«é®æŒ¡
- âŒ **æ— æ³•æŸ¥çœ‹è¯¦æƒ…**ï¼šç”¨æˆ·ä¸çŸ¥é“å…·ä½“åŒ…å«å“ªäº›è‚¡ç¥¨
- âŒ **ç»Ÿè®¡ä¿¡æ¯ç¼ºå¤±**ï¼šä¸äº†è§£é‡‡æ ·æ¯”ä¾‹å’Œæ€»ä½“æƒ…å†µ

### æ”¹å–„å
- âœ… **å®Œæ•´ä¿¡æ¯å¯è§**ï¼šé¼ æ ‡æ‚¬åœå³å¯æŸ¥çœ‹æ‰€æœ‰è‚¡ç¥¨è¯¦æƒ…
- âœ… **ç»“æ„åŒ–æ˜¾ç¤º**ï¼šåˆ†è¡Œæ˜¾ç¤ºï¼Œæ¯è¡Œ3åªè‚¡ç¥¨ï¼Œæ˜“äºé˜…è¯»
- âœ… **ç»Ÿè®¡ä¿¡æ¯ä¸°å¯Œ**ï¼šæ˜¾ç¤ºåˆ†ææ•°é‡ã€ç³»ç»Ÿæ€»æ•°ã€é‡‡æ ·æ¯”ä¾‹
- âœ… **æ“ä½œæç¤º**ï¼šæä¾›é…ç½®è°ƒæ•´çš„å‹å¥½æç¤º

### å®é™…æ•ˆæœå±•ç¤º

#### ç•Œé¢æ˜¾ç¤ºå±‚æ¬¡
```
ç­–ç•¥ä¿¡æ¯åŒºåŸŸ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­–ç•¥åç§°: å¤šå› å­é‡åŒ–ç­–ç•¥ | è‚¡ç¥¨æ± : å¹³å®‰é“¶è¡Œ... â”‚  â† ç®€åŒ–æ˜¾ç¤º
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¼ æ ‡æ‚¬åœæ—¶:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ç­–ç•¥åˆ†æè‚¡ç¥¨æ± è¯¦æƒ…ï¼š                        â”‚
â”‚ åˆ†ææ•°é‡ï¼š10 åªè‚¡ç¥¨                          â”‚  â† è¯¦ç»†tooltip
â”‚ ç³»ç»Ÿæ€»æ•°ï¼š156 åªè‚¡ç¥¨                         â”‚
â”‚ é‡‡æ ·æ¯”ä¾‹ï¼š6.4%                              â”‚
â”‚ ...ï¼ˆå®Œæ•´è‚¡ç¥¨åˆ—è¡¨ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æŠ€æœ¯ç‰¹æ€§

### æ™ºèƒ½æ˜¾ç¤ºç­–ç•¥
1. **ç©ºé—´æ„ŸçŸ¥**ï¼šæ ¹æ®å¯ç”¨æ˜¾ç¤ºç©ºé—´è°ƒæ•´å†…å®¹è¯¦ç»†ç¨‹åº¦
2. **ä¿¡æ¯åˆ†å±‚**ï¼šæ ¸å¿ƒä¿¡æ¯æ˜¾ç¤ºï¼Œè¯¦ç»†ä¿¡æ¯éšè—åœ¨tooltipä¸­
3. **åŠ¨æ€æ›´æ–°**ï¼štooltipå†…å®¹éšæ•°æ®æ›´æ–°å®æ—¶åˆ·æ–°

### ç”¨æˆ·äº¤äº’ä¼˜åŒ–
1. **å³æ—¶å“åº”**ï¼šé¼ æ ‡æ‚¬åœå³æ—¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
2. **ä¿¡æ¯å¯†åº¦**ï¼šå¹³è¡¡äº†æ˜¾ç¤ºç©ºé—´å’Œä¿¡æ¯å®Œæ•´æ€§
3. **è§†è§‰å¼•å¯¼**ï¼šé€šè¿‡"ç­‰Xåªï¼ˆå…±Yåªï¼‰"æç¤ºç”¨æˆ·æœ‰æ›´å¤šä¿¡æ¯

### å®¹é”™å¤„ç†
```python
except Exception as e:
    logger.error(f"æ›´æ–°è‚¡ç¥¨æ± æ˜¾ç¤ºå¤±è´¥: {e}")
    # å‘ç”Ÿé”™è¯¯æ—¶è®¾ç½®é”™è¯¯æç¤º
    self.stocks_value.setToolTip(f"è‚¡ç¥¨æ± ä¿¡æ¯æ›´æ–°å¤±è´¥: {e}")
```

## ğŸ“ˆ ä¸šåŠ¡ä»·å€¼

### ä¿¡æ¯å¯è®¿é—®æ€§
- **å®Œæ•´æ€§**ï¼šç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ‰€æœ‰åˆ†æè‚¡ç¥¨ï¼Œä¸ä¼šé—æ¼
- **ä¾¿åˆ©æ€§**ï¼šæ— éœ€é¢å¤–æ“ä½œï¼Œé¼ æ ‡æ‚¬åœå³å¯è·å–è¯¦æƒ…
- **ä¸“ä¸šæ€§**ï¼šæä¾›ä¸“ä¸šçš„ç»Ÿè®¡ä¿¡æ¯å’Œé…ç½®æç¤º

### ç”¨æˆ·ä½“éªŒæå‡
- **ç›´è§‚æ€§**ï¼šé€šè¿‡æ‚¬åœtooltipè‡ªç„¶åœ°å±•ç¤ºæ›´å¤šä¿¡æ¯
- **æ•ˆç‡æ€§**ï¼šä¸éœ€è¦é¢å¤–çš„å¯¹è¯æ¡†æˆ–é¡µé¢è·³è½¬
- **å¯æ§æ€§**ï¼šæä¾›é…ç½®è°ƒæ•´çš„æ˜ç¡®æŒ‡å¼•

### ç•Œé¢è®¾è®¡ä¼˜åŒ–
- **ç©ºé—´åˆ©ç”¨**ï¼šåœ¨æœ‰é™ç©ºé—´å†…æœ€å¤§åŒ–ä¿¡æ¯å±•ç¤º
- **å±‚æ¬¡ç»“æ„**ï¼šä¸»è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œæ¬¡è¦ä¿¡æ¯éšè—ä½†å¯è®¿é—®
- **äº¤äº’è‡ªç„¶**ï¼šç¬¦åˆç”¨æˆ·å¯¹tooltipçš„ä½¿ç”¨ä¹ æƒ¯

## ğŸ‰ æ€»ç»“

### âœ… æ ¸å¿ƒåŠŸèƒ½å®ç°
1. **é¼ æ ‡æ‚¬åœæç¤º**ï¼šå®Œæ•´è‚¡ç¥¨æ± ä¿¡æ¯åœ¨tooltipä¸­æ˜¾ç¤º
2. **æ™ºèƒ½çœç•¥æ˜¾ç¤º**ï¼šä¸»ç•Œé¢æ˜¾ç¤ºæ ¸å¿ƒä¿¡æ¯ï¼Œè¯¦æƒ…é€šè¿‡æ‚¬åœæŸ¥çœ‹
3. **ç»“æ„åŒ–ä¿¡æ¯**ï¼šåˆ†è¡Œæ˜¾ç¤ºè‚¡ç¥¨ï¼ŒåŒ…å«ç»Ÿè®¡æ•°æ®å’Œæ“ä½œæç¤º
4. **å®æ—¶æ›´æ–°**ï¼štooltipå†…å®¹éšè‚¡ç¥¨æ± æ•°æ®åŒæ­¥æ›´æ–°

### ğŸ¯ ç”¨æˆ·é—®é¢˜è§£å†³
- **å†…å®¹é®æŒ¡é—®é¢˜**ï¼šâœ… é€šè¿‡tooltipå®Œå…¨è§£å†³
- **ä¿¡æ¯å®Œæ•´æ€§**ï¼šâœ… æ‰€æœ‰è‚¡ç¥¨ä¿¡æ¯éƒ½å¯æŸ¥çœ‹
- **ä½¿ç”¨ä¾¿åˆ©æ€§**ï¼šâœ… é¼ æ ‡æ‚¬åœå³å¯è·å–è¯¦æƒ…

### ğŸ† æœ€ç»ˆæ•ˆæœ
**ç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡ç®€å•çš„é¼ æ ‡æ‚¬åœæ“ä½œï¼ŒæŸ¥çœ‹è¢«é®æŒ¡çš„å®Œæ•´è‚¡ç¥¨æ± å†…å®¹ï¼ŒåŒ…æ‹¬æ‰€æœ‰è‚¡ç¥¨è¯¦æƒ…ã€ç»Ÿè®¡ä¿¡æ¯å’Œé…ç½®æç¤ºï¼Œå®Œå…¨è§£å†³äº†ä¿¡æ¯å¯è®¿é—®æ€§é—®é¢˜ï¼**

---

**å®ç°æ—¶é—´**: 2025-08-19  
**åŠŸèƒ½ç±»å‹**: UIäº¤äº’ä¼˜åŒ–  
**è§£å†³æ–¹æ¡ˆ**: æ™ºèƒ½Tooltipæ‚¬åœæ˜¾ç¤º  
**ç”¨æˆ·ä½“éªŒ**: ï¿½ï¿½ æ˜¾è‘—æå‡ï¼Œä»ä¿¡æ¯å—é™åˆ°å®Œå…¨å¯è®¿é—® 