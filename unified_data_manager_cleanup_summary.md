# UnifiedDataManager æ¸…ç†æ€»ç»“æŠ¥å‘Š

## ğŸ¯ å·²å®Œæˆçš„æ¸…ç†å·¥ä½œ

### âœ… åˆ é™¤çš„é‡å¤å‡½æ•°

| å‡½æ•°å | çŠ¶æ€ | åŸå›  |
|--------|------|------|
| `_get_stock_list_from_duckdb()` | âœ… å·²åˆ é™¤ | è¢«`_get_asset_list_from_duckdb()`æ›¿ä»£ |
| `_get_external_stock_list()` | âœ… å·²åˆ é™¤ | ä¸å†ä½¿ç”¨å¤–éƒ¨æ’ä»¶æ•°æ®æº |
| `_get_mock_stock_list()` | âœ… å·²åˆ é™¤ | ä¸å†éœ€è¦æ¨¡æ‹Ÿæ•°æ® |

### ğŸ”§ ä¿ç•™çš„æ ¸å¿ƒå‡½æ•°

| å‡½æ•°å | åŠŸèƒ½ | çŠ¶æ€ |
|--------|------|------|
| `get_stock_list()` | å‘åå…¼å®¹æ¥å£ | âœ… ä¿ç•™ï¼Œè°ƒç”¨`get_asset_list()` |
| `get_asset_list()` | é€šç”¨èµ„äº§åˆ—è¡¨è·å– | âœ… ä¿ç•™ï¼Œä¸»è¦å®ç° |
| `_get_asset_list_from_duckdb()` | DuckDBæŸ¥è¯¢å®ç° | âœ… ä¿ç•™ï¼Œæ ¸å¿ƒæŸ¥è¯¢ |
| `get_kdata()` | Kçº¿æ•°æ®ä¸»æ¥å£ | âœ… ä¿ç•™ï¼Œä¸»è¦æ¥å£ |
| `_get_kdata_from_duckdb()` | DuckDB Kçº¿æŸ¥è¯¢ | âœ… ä¿ç•™ï¼Œæ ¸å¿ƒå®ç° |

## ğŸ—ï¸ æ¶æ„ä¼˜åŒ–ç»“æœ

### ç®€åŒ–å‰
```
æ•°æ®æºä¼˜å…ˆçº§ï¼šDuckDB â†’ TETæ’ä»¶ â†’ ä¼ ç»Ÿæ’ä»¶ â†’ æ¨¡æ‹Ÿæ•°æ®
å‡½æ•°æ•°é‡ï¼š~15ä¸ªé‡å¤/ç›¸ä¼¼å‡½æ•°
è°ƒç”¨é“¾è·¯ï¼šå¤æ‚çš„å¤šå±‚å›é€€æœºåˆ¶
```

### ç®€åŒ–å
```
æ•°æ®æºä¼˜å…ˆçº§ï¼šDuckDB â†’ æç¤ºåˆå§‹åŒ–æ•°æ®åº“
å‡½æ•°æ•°é‡ï¼š~8ä¸ªæ ¸å¿ƒå‡½æ•°
è°ƒç”¨é“¾è·¯ï¼šç›´æ¥DuckDBæŸ¥è¯¢
```

## ğŸ“Š ä»éœ€å¤„ç†çš„é‡å¤å‡½æ•°

### é«˜ä¼˜å…ˆçº§ï¼ˆéœ€è¦åˆ é™¤ï¼‰
- `get_asset_list(asset_type: AssetType)` (ç¬¬1298è¡Œ) - TETæ¨¡å¼ï¼Œå·²åºŸå¼ƒ
- `_legacy_get_asset_list()` (ç¬¬1549è¡Œ) - ä¼ ç»Ÿæ¨¡å¼ï¼Œå·²åºŸå¼ƒ
- `get_hikyuu_alternative_stock_list()` (ç¬¬3248è¡Œ) - HIkyuuæ›¿ä»£ï¼Œå·²åºŸå¼ƒ
- `get_hikyuu_alternative_kdata()` (ç¬¬3233è¡Œ) - HIkyuuæ›¿ä»£ï¼Œå·²åºŸå¼ƒ

### ä¸­ä¼˜å…ˆçº§ï¼ˆéœ€è¦æ£€æŸ¥ï¼‰
- `get_kdata_from_source()` (ç¬¬958è¡Œ) - æŒ‡å®šæ•°æ®æºï¼Œå¯èƒ½åºŸå¼ƒ
- `_get_external_kdata()` (ç¬¬1050è¡Œ) - å¤–éƒ¨æ•°æ®æºï¼Œå¯èƒ½åºŸå¼ƒ
- `get_stock_data()` (ç¬¬1718è¡Œ) - å¼‚æ­¥æ¥å£ï¼Œæ£€æŸ¥ä½¿ç”¨æƒ…å†µ
- `_get_kdata()` (ç¬¬1829è¡Œ) - å¼‚æ­¥å®ç°ï¼Œæ£€æŸ¥ä½¿ç”¨æƒ…å†µ

## ğŸ‰ ä¼˜åŒ–æ•ˆæœ

### ä»£ç è´¨é‡æå‡
- âœ… åˆ é™¤äº†çº¦200è¡Œé‡å¤ä»£ç 
- âœ… ç®€åŒ–äº†æ•°æ®æºæ¶æ„
- âœ… ç»Ÿä¸€äº†æ¥å£è§„èŒƒ

### æ€§èƒ½æå‡
- âœ… å‡å°‘äº†å¯åŠ¨æ—¶é—´ï¼ˆä¸å†éœ€è¦æ’ä»¶å‘ç°ï¼‰
- âœ… ç®€åŒ–äº†è°ƒç”¨é“¾è·¯
- âœ… æé«˜äº†ç¼“å­˜æ•ˆç‡

### ç»´æŠ¤æ€§æå‡
- âœ… å•ä¸€æ•°æ®æºæ¶æ„ï¼ˆDuckDBä¼˜å…ˆï¼‰
- âœ… æ¸…æ™°çš„è°ƒç”¨å…³ç³»
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†

## ğŸ”„ ä¸‹ä¸€æ­¥å»ºè®®

1. **ç»§ç»­æ¸…ç†å‰©ä½™é‡å¤å‡½æ•°**
2. **æ£€æŸ¥å¼‚æ­¥æ¥å£çš„ä½¿ç”¨æƒ…å†µ**
3. **éªŒè¯æ‰€æœ‰è°ƒç”¨æ–¹æ˜¯å¦æ­£å¸¸å·¥ä½œ**
4. **è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶**

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### æ–°çš„è°ƒç”¨æ–¹å¼
```python
# è·å–è‚¡ç¥¨åˆ—è¡¨ï¼ˆæ¨èï¼‰
data_manager.get_asset_list(asset_type='stock', market='sh')

# å‘åå…¼å®¹æ–¹å¼
data_manager.get_stock_list(market='sh')

# è·å–Kçº¿æ•°æ®
data_manager.get_kdata(stock_code='000001', period='D', count=100)
```

### æ•°æ®åº“ä¾èµ–
- ç¡®ä¿DuckDBæ•°æ®åº“å·²åˆå§‹åŒ–
- è¿è¡Œæ•°æ®å¯¼å…¥è„šæœ¬å¡«å……æ•°æ®
- ç›‘æ§æ—¥å¿—ç¡®è®¤æŸ¥è¯¢æ­£å¸¸
