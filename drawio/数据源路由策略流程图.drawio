<mxfile host="65bd71144e">
    <diagram id="mzuJDqwnZT4n83KM9A8H" name="Page-1">
        <mxGraphModel dx="1969" dy="1358" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="FactorWeave-Quant æ•°æ®æºæ™ºèƒ½è·¯ç”±ç­–ç•¥æµç¨‹å›¾" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="350" y="20" width="500" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="route_start" value="è·¯ç”±è¯·æ±‚å¼€å§‹&#10;RoutingRequest" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="350" y="80" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="request_parse" value="è§£æžè¯·æ±‚å‚æ•°&#10;- asset_type&#10;- data_type&#10;- symbol&#10;- priority" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="300" y="180" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="get_sources" value="èŽ·å–æ”¯æŒè¯¥èµ„äº§ç±»åž‹çš„æ•°æ®æºåˆ—è¡¨" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="300" y="300" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="sources_available" value="æ˜¯å¦æœ‰å¯ç”¨æ•°æ®æºï¼Ÿ" style="diamond;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#0f0f0f;" parent="1" vertex="1">
                    <mxGeometry x="320" y="400" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="no_sources" value="è¿”å›žç©ºç»“æžœ&#10;è®°å½•é”™è¯¯æ—¥å¿—" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="-140" y="420" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="circuit_check" value="ç†”æ–­å™¨çŠ¶æ€æ£€æŸ¥&#10;è¿‡æ»¤ä¸å¯ç”¨æ•°æ®æº" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="300" y="520" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="healthy_sources" value="æ˜¯å¦æœ‰å¥åº·æ•°æ®æºï¼Ÿ" style="diamond;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="320" y="620" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="no_healthy" value="æ‰€æœ‰æ•°æ®æºä¸å¯ç”¨&#10;è§¦å‘é™çº§ç­–ç•¥" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#0d0d0d;" parent="1" vertex="1">
                    <mxGeometry x="620" y="690" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="strategy_selection" value="é€‰æ‹©è·¯ç”±ç­–ç•¥" style="diamond;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="320" y="740" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="selected_source" value="é€‰å®šæ•°æ®æº" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="350" y="1100" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="performance_record" value="è®°å½•è·¯ç”±å†³ç­–&#10;- é€‰æ‹©çš„æ•°æ®æº&#10;- å†³ç­–æ—¶é—´&#10;- è·¯ç”±ç­–ç•¥" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="300" y="1180" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="route_end" value="è·¯ç”±å®Œæˆ&#10;è¿”å›žæ•°æ®æºID" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="350" y="1300" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="strategy_box" value="è·¯ç”±ç­–ç•¥è¯¦ç»†è¯´æ˜Ž" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontSize=21;fontStyle=1;strokeColor=#666666;gradientColor=#b3b3b3;verticalAlign=top;container=1;" parent="1" vertex="1">
                    <mxGeometry x="950" y="130" width="400" height="870" as="geometry"/>
                </mxCell>
                <mxCell id="strategy_content" value="ðŸŽ¯ ä¼˜å…ˆçº§è·¯ç”± (PRIORITY)&#10;â€¢ æ ¹æ®é¢„è®¾ä¼˜å…ˆçº§é€‰æ‹©æ•°æ®æº&#10;â€¢ è€ƒè™‘å¥åº·çŠ¶æ€ä½œä¸ºæ¬¡è¦å› ç´ &#10;â€¢ é€‚ç”¨äºŽæœ‰æ˜Žç¡®åå¥½çš„åœºæ™¯&#10;&#10;ðŸ”„ è½®è¯¢è·¯ç”± (ROUND_ROBIN)&#10;â€¢ ä¾æ¬¡å¾ªçŽ¯ä½¿ç”¨å¯ç”¨æ•°æ®æº&#10;â€¢ ç¡®ä¿è´Ÿè½½å‡åŒ€åˆ†å¸ƒ&#10;â€¢ è¿‡æ»¤ä¸å¥åº·çš„æ•°æ®æº&#10;&#10;âš–ï¸ åŠ æƒè½®è¯¢è·¯ç”± (WEIGHTED_ROUND_ROBIN)&#10;â€¢ æ ¹æ®æƒé‡åˆ†é…è¯·æ±‚&#10;â€¢ æƒé‡ä¸Žå¥åº·çŠ¶æ€ç»“åˆ&#10;â€¢ åŠ¨æ€è°ƒæ•´æƒé‡å€¼&#10;&#10;ðŸ’š å¥åº·çŠ¶æ€è·¯ç”± (HEALTH_BASED)&#10;â€¢ ç»¼åˆè¯„ä¼°æ•°æ®æºè´¨é‡&#10;â€¢ å¥åº·åˆ†æ•° + æˆåŠŸçŽ‡ + å“åº”æ—¶é—´&#10;â€¢ è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ•°æ®æº&#10;&#10;ðŸ”— æœ€å°‘è¿žæŽ¥è·¯ç”± (LEAST_CONNECTIONS)&#10;â€¢ é€‰æ‹©å½“å‰è¿žæŽ¥æ•°æœ€å°‘çš„æ•°æ®æº&#10;â€¢ å¹³è¡¡å¹¶å‘è¯·æ±‚è´Ÿè½½&#10;â€¢ é¿å…å•ç‚¹è¿‡è½½&#10;&#10;ðŸŽ² éšæœºè·¯ç”± (RANDOM)&#10;â€¢ éšæœºé€‰æ‹©å¯ç”¨æ•°æ®æº&#10;â€¢ ç®€å•é«˜æ•ˆçš„è´Ÿè½½åˆ†æ•£&#10;â€¢ é€‚ç”¨äºŽå¯¹é¡ºåºæ— è¦æ±‚çš„åœºæ™¯&#10;&#10;âš¡ ç†”æ–­å™¨è·¯ç”± (CIRCUIT_BREAKER)&#10;â€¢ åŸºäºŽç†”æ–­å™¨çŠ¶æ€è·¯ç”±&#10;â€¢ è‡ªåŠ¨éš”ç¦»æ•…éšœæ•°æ®æº&#10;â€¢ æ”¯æŒè‡ªåŠ¨æ¢å¤æœºåˆ¶&#10;&#10;ðŸ›¡ï¸ ç†”æ–­å™¨çŠ¶æ€è¯´æ˜Žï¼š&#10;â€¢ CLOSED: æ­£å¸¸å·¥ä½œçŠ¶æ€&#10;â€¢ OPEN: æ‹’ç»è¯·æ±‚çŠ¶æ€&#10;â€¢ HALF_OPEN: è¯•æŽ¢æ¢å¤çŠ¶æ€&#10;&#10;ðŸ“Š å¥åº·åˆ†æ•°è®¡ç®—ï¼š&#10;health_score = success_rate Ã— 0.4 + &#10;              circuit_score Ã— 0.3 + &#10;              response_score Ã— 0.2&#10;&#10;ðŸ”§ è·¯ç”±å†³ç­–å› ç´ ï¼š&#10;â€¢ æ•°æ®æºå¯ç”¨æ€§&#10;â€¢ ç†”æ–­å™¨çŠ¶æ€&#10;â€¢ åŽ†å²æ€§èƒ½æŒ‡æ ‡&#10;â€¢ å®žæ—¶å¥åº·æ£€æŸ¥&#10;â€¢ è´Ÿè½½å‡è¡¡éœ€æ±‚" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#050505;" parent="1" vertex="1">
                    <mxGeometry x="970" y="165" width="370" height="800" as="geometry"/>
                </mxCell>
                <mxCell id="line1" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="route_start" target="request_parse" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line2" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="request_parse" target="get_sources" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line3" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="get_sources" target="sources_available" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line4" value="å¦" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="sources_available" target="no_sources" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line5" value="æ˜¯" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="sources_available" target="circuit_check" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line6" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="circuit_check" target="healthy_sources" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line7" value="å¦" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="healthy_sources" target="no_healthy" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line8" value="æ˜¯" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="healthy_sources" target="strategy_selection" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line9a" value="ä¼˜å…ˆçº§" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="strategy_selection" target="priority_routing" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line9b" value="è½®è¯¢" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="strategy_selection" target="roundrobin_routing" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line9c" value="åŠ æƒè½®è¯¢" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="strategy_selection" target="weighted_routing" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line9d" value="å¥åº·çŠ¶æ€" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="strategy_selection" target="health_routing" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line10a" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="priority_routing" target="selected_source" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line10b" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="roundrobin_routing" target="selected_source" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line10c" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="weighted_routing" target="selected_source" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line10d" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="health_routing" target="selected_source" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line11" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="selected_source" target="performance_record" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line12" value="" style="endArrow=classic;html=1;flowAnimation=1;" parent="1" source="performance_record" target="route_end" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line13" value="é™çº§ç­–ç•¥" style="endArrow=classic;html=1;strokeStyle=dashed;flowAnimation=1;" parent="1" source="no_healthy" target="strategy_selection" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="line14" value="" style="endArrow=classic;html=1;strokeStyle=dashed;flowAnimation=1;" parent="1" source="no_sources" target="route_end" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="-70" y="1330"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="6" value="è·¯ç”±å®Œæˆ&#10;è¿”å›žæ•°æ®æºID" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="350" y="1300" width="150" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="è®°å½•è·¯ç”±å†³ç­–&#10;- é€‰æ‹©çš„æ•°æ®æº&#10;- å†³ç­–æ—¶é—´&#10;- è·¯ç”±ç­–ç•¥" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="300" y="1180" width="250" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="é€‰å®šæ•°æ®æº" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="350" y="1100" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="é€‰æ‹©è·¯ç”±ç­–ç•¥" style="diamond;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="320" y="740" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="æ˜¯å¦æœ‰å¥åº·æ•°æ®æºï¼Ÿ" style="diamond;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="320" y="620" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="ç†”æ–­å™¨çŠ¶æ€æ£€æŸ¥&#10;è¿‡æ»¤ä¸å¯ç”¨æ•°æ®æº" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontColor=#000000;" vertex="1" parent="1">
                    <mxGeometry x="300" y="520" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="50" y="880" width="840" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="priority_routing" value="ä¼˜å…ˆçº§è·¯ç”±ç­–ç•¥&#10;PriorityRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1ffc7;strokeColor=#82b366;" parent="21" vertex="1">
                    <mxGeometry width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="priority_details" value="1. èŽ·å–ä¼˜å…ˆçº§é…ç½®&#10;2. æŒ‰ä¼˜å…ˆçº§æŽ’åº&#10;3. è€ƒè™‘å¥åº·åˆ†æ•°&#10;4. é€‰æ‹©æœ€é«˜ä¼˜å…ˆçº§" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" parent="21" vertex="1">
                    <mxGeometry y="110" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="roundrobin_routing" value="è½®è¯¢è·¯ç”±ç­–ç•¥&#10;RoundRobinRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="21" vertex="1">
                    <mxGeometry x="220" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="roundrobin_details" value="1. è¿‡æ»¤å¥åº·æ•°æ®æº&#10;2. ç»´æŠ¤è½®è¯¢ç´¢å¼•&#10;3. å¾ªçŽ¯é€‰æ‹©æ•°æ®æº&#10;4. çº¿ç¨‹å®‰å…¨å¤„ç†" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" parent="21" vertex="1">
                    <mxGeometry x="220" y="110" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="weighted_routing" value="åŠ æƒè½®è¯¢è·¯ç”±ç­–ç•¥&#10;WeightedRoundRobinStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="21" vertex="1">
                    <mxGeometry x="440" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="weighted_details" value="1. è®¡ç®—æœ‰æ•ˆæƒé‡&#10;2. æƒé‡ Ã— å¥åº·åˆ†æ•°&#10;3. åŠ¨æ€è°ƒæ•´æƒé‡&#10;4. é€‰æ‹©æœ€å¤§æƒé‡" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" parent="21" vertex="1">
                    <mxGeometry x="440" y="110" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="health_routing" value="å¥åº·çŠ¶æ€è·¯ç”±ç­–ç•¥&#10;HealthBasedRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="21" vertex="1">
                    <mxGeometry x="660" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="health_details" value="1. è®¡ç®—ç»¼åˆè¯„åˆ†&#10;2. å¥åº·åˆ†æ•° 40%&#10;3. æˆåŠŸçŽ‡ 40%&#10;4. å“åº”æ—¶é—´ 20%" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" parent="21" vertex="1">
                    <mxGeometry x="660" y="110" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="åŠ æƒè½®è¯¢è·¯ç”±ç­–ç•¥&#10;WeightedRoundRobinStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontColor=#000000;" vertex="1" parent="21">
                    <mxGeometry x="440" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="å¥åº·çŠ¶æ€è·¯ç”±ç­–ç•¥&#10;HealthBasedRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#000000;" vertex="1" parent="21">
                    <mxGeometry x="660" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="è½®è¯¢è·¯ç”±ç­–ç•¥&#10;RoundRobinRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;" vertex="1" parent="21">
                    <mxGeometry x="220" width="180" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="ä¼˜å…ˆçº§è·¯ç”±ç­–ç•¥&#10;PriorityRoutingStrategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1ffc7;strokeColor=#82b366;fontColor=#000000;" vertex="1" parent="21">
                    <mxGeometry width="180" height="100" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>