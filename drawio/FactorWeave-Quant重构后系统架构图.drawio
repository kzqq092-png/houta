<mxfile host="65bd71144e">
    <diagram name="FactorWeave-Quant重构后系统架构" id="refactored-architecture">
        <mxGraphModel dx="1359" dy="1749" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="12" value="" style="group" vertex="1" connectable="0" parent="1">
                    <mxGeometry x="30" y="-90" width="1270" height="940" as="geometry"/>
                </mxCell>
                <mxCell id="title" value="FactorWeave-Quant 重构后系统架构图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" parent="12" vertex="1">
                    <mxGeometry x="370" width="300" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="ui-layer" value="表现层 (UI Layer) - 保持不变" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="20" y="70" width="1000" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="left-panel" value="LeftPanel&#10;股票列表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="50" y="130" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="middle-panel" value="MiddlePanel&#10;K线图表" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="190" y="130" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="right-panel" value="RightPanel&#10;技术分析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="330" y="130" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="bottom-panel" value="BottomPanel&#10;日志状态" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="470" y="130" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="coordinator" value="MainWindowCoordinator&#10;主窗口协调器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="620" y="130" width="160" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="service-layer" value="服务层 (Service Layer) - 统一整合" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="20" y="230" width="1000" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="config-service" value="ConfigService&#10;统一配置服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="50" y="310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="indicator-service" value="IndicatorService&#10;统一指标服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="190" y="310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="strategy-service" value="StrategyService&#10;统一策略服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="330" y="310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-service" value="PluginService&#10;插件管理服务" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="470" y="310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="other-services-new" value="其他服务&#10;ThemeService&#10;ChartService&#10;AnalysisService" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="610" y="310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="advantage1" value="优势1: 消除重复建设&#10;统一服务接口&#10;代码复用率提升&#10;维护成本降低" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="1070" y="310" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="advantage2" value="优势2: FactorWeave-Quant完全解耦&#10;可选插件模式&#10;灵活替换和扩展&#10;降低技术风险" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="1070" y="450" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="advantage3" value="优势3: 完全插件化&#10;开放生态系统&#10;社区贡献友好&#10;商业化潜力" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry x="1070" y="610" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="ui-to-service-new" value="统一接口调用" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#82b366;strokeWidth=2;fontColor=#19C414;labelBackgroundColor=none;" parent="12" source="ui-layer" target="service-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="490" as="sourcePoint"/>
                        <mxPoint x="570" y="440" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="service-to-data-new" value="TET数据管道" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#d6b656;strokeWidth=2;fontColor=#19C414;labelBackgroundColor=none;" parent="12" source="service-layer" target="data-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="490" as="sourcePoint"/>
                        <mxPoint x="570" y="440" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="clean-architecture" value="清晰分层架构" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#080808;" parent="12" vertex="1">
                    <mxGeometry y="270" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="" style="group" vertex="1" connectable="0" parent="12">
                    <mxGeometry x="20" y="840" width="1000" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="database-layer" value="数据库层 (Database Layer) - 保持不变" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;fontColor=#080808;" parent="3" vertex="1">
                    <mxGeometry width="1000" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="system-db-new" value="factorweave_system.db&#10;系统配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#080808;" parent="3" vertex="1">
                    <mxGeometry x="30" y="60" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="indicators-db-new" value="indicators.db&#10;指标定义" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#080808;" parent="3" vertex="1">
                    <mxGeometry x="170" y="60" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="plugins-db" value="plugins.db&#10;插件配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#080808;" parent="3" vertex="1">
                    <mxGeometry x="310" y="60" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="strategies-db-new" value="strategies.db&#10;策略数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontColor=#080808;" parent="3" vertex="1">
                    <mxGeometry x="450" y="60" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="" style="group" vertex="1" connectable="0" parent="12">
                    <mxGeometry x="20" y="650" width="1000" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="" style="group" vertex="1" connectable="0" parent="4">
                    <mxGeometry x="-30" y="-10" width="1030" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-layer" value="插件层 (Plugin Layer) - 完全插件化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;fontColor=#080808;" parent="6" vertex="1">
                    <mxGeometry x="30" width="1000" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-ecosystem" value="插件生态系统" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#080808;" parent="6" vertex="1">
                    <mxGeometry y="45" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="datasource-plugins" value="数据源插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="30" y="20" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="hikyuu-plugin" value="FactorWeave-Quant插件&#10;(可选)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="30" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="akshare-plugin" value="AkShare插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="120" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="other-data-plugins" value="其他数据源插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="210" y="90" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="indicator-plugins" value="指标插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="330" y="20" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="hikyuu-indicators" value="FactorWeave-Quant指标&#10;(可选)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="330" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="talib-indicators" value="TA-Lib指标" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="420" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="custom-indicators" value="自定义指标" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="510" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="strategy-plugins" value="策略插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="610" y="20" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="hikyuu-strategies" value="FactorWeave-Quant策略&#10;(可选)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="610" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="custom-strategies" value="自定义策略" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="710" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="trading-plugins" value="交易插件" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontColor=#080808;" parent="4" vertex="1">
                    <mxGeometry x="810" y="90" width="80" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-to-db-new" value="数据存储" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#9673a6;strokeWidth=2;fontColor=#19C414;labelBackgroundColor=none;" parent="12" source="plugin-layer" target="database-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="740" as="sourcePoint"/>
                        <mxPoint x="570" y="690" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="9" value="" style="group" vertex="1" connectable="0" parent="12">
                    <mxGeometry y="410" width="1020" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="data-layer" value="数据访问层 (Data Layer) - TET数据管道统一" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="20" width="1000" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="tet-pipeline-enhanced" value="TET数据管道&#10;(Transform-Extract-Transform)&#10;统一数据访问接口" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="50" y="80" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="unified-data-manager" value="UnifiedDataManager&#10;统一数据管理器&#10;数据路由和缓存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="270" y="80" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="data-router" value="DataSourceRouter&#10;智能数据源路由&#10;健康检查和回退" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="470" y="80" width="160" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="event-bus-new" value="EventBus&#10;事件总线&#10;组件通信" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="650" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="unified-data" value="统一数据访问" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry y="35" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-management" value="插件管理流程" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=12;fontStyle=1;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="850" y="15" width="120" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-discovery" value="自动发现" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=10;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="850" y="40" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="8" style="edgeStyle=none;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;fontColor=#3399FF;" edge="1" parent="9" source="plugin-loading">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="970" y="50" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="plugin-loading" value="动态加载" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=10;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="920" y="40" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-health" value="健康检查" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=10;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="850" y="65" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="plugin-failover" value="故障转移" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#666666;fontSize=10;fontColor=#080808;" parent="9" vertex="1">
                    <mxGeometry x="920" y="65" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="7" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontColor=#3399FF;" edge="1" parent="9" source="plugin-loading" target="plugin-loading">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="data-to-plugin-new" value="插件调用" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#b85450;strokeWidth=2;fontColor=#19C414;labelBackgroundColor=none;" parent="12" source="data-layer" target="plugin-layer" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="590" as="sourcePoint"/>
                        <mxPoint x="570" y="540" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="10" value="" style="group;align=right;verticalAlign=top;" vertex="1" connectable="0" parent="12">
                    <mxGeometry x="1080" y="80" width="130" height="190" as="geometry"/>
                </mxCell>
                <mxCell id="data-flow" value="数据流向" style="text;html=1;strokeColor=#6F0000;fillColor=#a20025;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;labelBackgroundColor=#8d63bf;shadow=0;" parent="10" vertex="1">
                    <mxGeometry width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="" style="group" vertex="1" connectable="0" parent="10">
                    <mxGeometry x="59" y="53.33" height="136.67" as="geometry"/>
                </mxCell>
                <mxCell id="flow-arrow1" value="用户操作" style="endArrow=classic;html=1;rounded=0;strokeColor=#6F0000;strokeWidth=1;dashed=1;fontColor=#080808;labelBackgroundColor=#8d63bf;shadow=0;fillColor=#a20025;" parent="11" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint as="sourcePoint"/>
                        <mxPoint y="34.167500000000004" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="flow-arrow2" value="服务调用" style="endArrow=classic;html=1;rounded=0;strokeColor=#6F0000;strokeWidth=1;dashed=1;fontColor=#080808;labelBackgroundColor=#8d63bf;shadow=0;fillColor=#a20025;" parent="11" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint y="51.25125" as="sourcePoint"/>
                        <mxPoint y="85.41875" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="flow-arrow3" value="数据请求" style="endArrow=classic;html=1;rounded=0;strokeColor=#6F0000;strokeWidth=1;dashed=1;fontColor=#080808;labelBackgroundColor=#8d63bf;shadow=0;fillColor=#a20025;" parent="11" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint y="102.50249999999997" as="sourcePoint"/>
                        <mxPoint y="136.67" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>