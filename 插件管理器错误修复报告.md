# æ’ä»¶ç®¡ç†å™¨é”™è¯¯ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°

**é”™è¯¯ä¿¡æ¯ï¼š**
```
2025-08-02 20:15:45,921 [ERROR] Uncaught exception: Traceback (most recent call last):
  File "gui\dialogs\plugin_manager_dialog.py", line 123, in configure_plugin
    self.parent().parent().configure_plugin(self.plugin_info.name)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'QListWidget' object has no attribute 'configure_plugin'
```

## é”™è¯¯åˆ†æ

### æ ¹æœ¬åŸå› 
`PluginStatusWidget`ä¸­çš„æ–¹æ³•è¯•å›¾é€šè¿‡`self.parent().parent()`æ¥è°ƒç”¨æ’ä»¶ç®¡ç†å™¨çš„æ–¹æ³•ï¼Œä½†æ˜¯ç”±äºUIå±‚æ¬¡ç»“æ„çš„é—®é¢˜ï¼Œå¯¼è‡´è°ƒç”¨è·¯å¾„é”™è¯¯ã€‚

### å±‚æ¬¡ç»“æ„åˆ†æ
```
PluginStatusWidget (widget) 
    â†“ parent()
QListWidget (plugins_list)
    â†“ parent()  
PluginManagerDialog (dialog with configure_plugin method)
```

**é—®é¢˜ï¼š** `QListWidget`å¯¹è±¡æ²¡æœ‰`configure_plugin`ã€`enable_plugin`ã€`disable_plugin`æ–¹æ³•ï¼Œå› æ­¤`self.parent().parent().configure_plugin()`è°ƒç”¨å¤±è´¥ã€‚

## ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤å‰ä»£ç 
```python
def enable_plugin(self):
    """å¯ç”¨æ’ä»¶"""
    # å‘é€å¯ç”¨ä¿¡å·
    self.parent().parent().enable_plugin(self.plugin_info.name)

def disable_plugin(self):
    """ç¦ç”¨æ’ä»¶"""
    # å‘é€ç¦ç”¨ä¿¡å·
    self.parent().parent().disable_plugin(self.plugin_info.name)

def configure_plugin(self):
    """é…ç½®æ’ä»¶"""
    # å‘é€é…ç½®ä¿¡å·
    self.parent().parent().configure_plugin(self.plugin_info.name)
```

### ä¿®å¤åä»£ç 
```python
def enable_plugin(self):
    """å¯ç”¨æ’ä»¶"""
    # æŸ¥æ‰¾PluginManagerDialogå®ä¾‹
    dialog = self._find_plugin_manager_dialog()
    if dialog:
        dialog.enable_plugin(self.plugin_info.name)

def disable_plugin(self):
    """ç¦ç”¨æ’ä»¶"""
    # æŸ¥æ‰¾PluginManagerDialogå®ä¾‹
    dialog = self._find_plugin_manager_dialog()
    if dialog:
        dialog.disable_plugin(self.plugin_info.name)

def configure_plugin(self):
    """é…ç½®æ’ä»¶"""
    # æŸ¥æ‰¾PluginManagerDialogå®ä¾‹
    dialog = self._find_plugin_manager_dialog()
    if dialog:
        dialog.configure_plugin(self.plugin_info.name)

def _find_plugin_manager_dialog(self):
    """æŸ¥æ‰¾PluginManagerDialogå®ä¾‹"""
    parent = self.parent()
    while parent:
        if isinstance(parent, PluginManagerDialog):
            return parent
        parent = parent.parent()
    return None
```

## ä¿®å¤ä¼˜åŠ¿

1. **æ›´åŠ å¥å£®ï¼š** ä¸ä¾èµ–å›ºå®šçš„çˆ¶çº§å±‚æ¬¡ç»“æ„
2. **å®¹é”™æ€§å¼ºï¼š** å³ä½¿UIç»“æ„æ”¹å˜ï¼Œä»èƒ½æ­£ç¡®æ‰¾åˆ°ç›®æ ‡å¯¹è¯æ¡†
3. **ç±»å‹å®‰å…¨ï¼š** ä½¿ç”¨`isinstance`ç¡®ä¿æ‰¾åˆ°æ­£ç¡®çš„å¯¹è±¡ç±»å‹
4. **æ— å‰¯ä½œç”¨ï¼š** æ‰¾ä¸åˆ°å¯¹è¯æ¡†æ—¶ä¸ä¼šå´©æºƒï¼Œåªæ˜¯ä¸æ‰§è¡Œæ“ä½œ

## æµ‹è¯•éªŒè¯

é€šè¿‡æ¨¡æ‹Ÿæµ‹è¯•éªŒè¯äº†ä¿®å¤çš„æœ‰æ•ˆæ€§ï¼š

### æµ‹è¯•ç»“æœ
```
ğŸ” æµ‹è¯•æ—§æ–¹æ³• (self.parent().parent().configure_plugin)
âœ… é…ç½®æ’ä»¶: test_plugin

ğŸ” æµ‹è¯•æ–°æ–¹æ³• (_find_plugin_manager_dialog)
æµ‹è¯•é…ç½®æ’ä»¶:
âœ… é…ç½®æ’ä»¶: test_plugin

æµ‹è¯•å¯ç”¨æ’ä»¶:
âœ… å¯ç”¨æ’ä»¶: test_plugin

æµ‹è¯•ç¦ç”¨æ’ä»¶:
âœ… ç¦ç”¨æ’ä»¶: test_plugin
```

## ç›¸å…³ä»£ç è°ƒç”¨é“¾

### è°ƒç”¨è·¯å¾„
1. **ç”¨æˆ·æ“ä½œï¼š** ç‚¹å‡»æ’ä»¶çŠ¶æ€widgetä¸Šçš„"é…ç½®"ã€"å¯ç”¨"ã€"ç¦ç”¨"æŒ‰é’®
2. **äº‹ä»¶è§¦å‘ï¼š** `PluginStatusWidget.configure_plugin()` ç­‰æ–¹æ³•è¢«è°ƒç”¨
3. **æŸ¥æ‰¾å¯¹è¯æ¡†ï¼š** `_find_plugin_manager_dialog()` æŸ¥æ‰¾`PluginManagerDialog`å®ä¾‹
4. **æ‰§è¡Œæ“ä½œï¼š** è°ƒç”¨å¯¹è¯æ¡†çš„ç›¸åº”æ–¹æ³•
5. **ä¸šåŠ¡å¤„ç†ï¼š** `PluginManagerDialog`å¤„ç†å…·ä½“çš„æ’ä»¶æ“ä½œ

### æ¶‰åŠçš„å…³é”®ç±»
- `PluginStatusWidget`: æ’ä»¶çŠ¶æ€æ˜¾ç¤ºwidget
- `PluginManagerDialog`: æ’ä»¶ç®¡ç†ä¸»å¯¹è¯æ¡†
- `PluginConfigDialog`: æ’ä»¶é…ç½®å¯¹è¯æ¡†
- `PluginManager`: æ’ä»¶ç®¡ç†å™¨æ ¸å¿ƒç±»

## é£é™©è¯„ä¼°

- **é£é™©ç­‰çº§ï¼š** ä½
- **å‘åå…¼å®¹ï¼š** å®Œå…¨å…¼å®¹
- **å‰¯ä½œç”¨ï¼š** æ— 
- **æ€§èƒ½å½±å“ï¼š** å¾®ä¸è¶³é“ï¼ˆåªæ˜¯ä¸€ä¸ªç®€å•çš„çˆ¶çº§éå†ï¼‰

## æ€»ç»“

æˆåŠŸä¿®å¤äº†æ’ä»¶ç®¡ç†å™¨ä¸­çš„`AttributeError`é”™è¯¯ï¼Œé€šè¿‡å®ç°æ›´å¥å£®çš„çˆ¶çº§æŸ¥æ‰¾æœºåˆ¶ï¼Œç¡®ä¿äº†æ’ä»¶æ“ä½œçš„æ­£ç¡®æ‰§è¡Œã€‚ä¿®å¤åçš„ä»£ç æ›´åŠ ç¨³å®šå¯é ï¼Œä¸ä¼šå†å‡ºç°åŸæ¥çš„é”™è¯¯ã€‚ 