# 情绪分析插件用户指南

## 概述

HIkyuu-UI的情绪分析插件系统为您提供真实的市场情绪数据，帮助您更好地理解市场状况并做出投资决策。系统采用插件化架构，支持多种数据源，具有智能聚合、缓存优化和错误处理等特性。

## 主要特性

### 🎯 真实数据源
- **AkShare集成**: 支持新闻情绪、微博情绪、VIX指数、消费者信心等
- **多源聚合**: 智能融合多个数据源，提供综合评分
- **数据质量控制**: 自动评估数据质量并提供反馈

### ⚡ 性能优化
- **智能缓存**: 减少API调用，提升响应速度
- **并发处理**: 多线程并发获取数据
- **异步架构**: 不阻塞用户界面

### 🔧 配置灵活
- **插件管理**: 启用/禁用特定数据源
- **权重配置**: 自定义各数据源的影响权重
- **参数调节**: 缓存时长、重试次数等可配置

## 功能说明

### 1. 情绪分析标签页

#### 1.1 实时情绪监控
位置：`分析 -> 情绪分析`

**功能**：
- 实时显示综合情绪指数
- 多维度情绪指标监控
- 智能交易信号生成

**使用方法**：
1. 加载股票K线数据
2. 点击"实时情绪分析"按钮
3. 查看各项情绪指标和建议

**指标说明**：
- **综合情绪**: 所有数据源的加权平均评分
- **恐慌指数**: 基于VIX等波动率指数
- **贪婪指数**: 基于新闻和社交媒体情绪
- **市场情绪**: 整体市场氛围评估
- **资金情绪**: 资金流向相关指标
- **社交情绪**: 社交媒体和新闻情绪

#### 1.2 历史趋势分析
**功能**：
- 查看历史情绪趋势
- 识别情绪拐点
- 分析情绪与价格关系

### 2. 市场情绪组件

#### 2.1 情绪指数显示
位置：主界面右侧面板

**功能**：
- 实时显示市场情绪分数
- 情绪走势图表
- 市场热度指示器

**数据更新**：
- 自动刷新（可配置间隔）
- 手动刷新功能
- 错误状态提示

### 3. 插件配置管理

#### 3.1 访问配置界面
路径：`设置 -> 插件配置 -> 情绪数据源`

#### 3.2 基础配置
**插件开关**：
- 启用/禁用特定数据源
- 实时状态监控
- 连接测试功能

**权重设置**：
- 数据权重：0.1-2.0（默认1.0）
- 优先级：1-100（数值越小优先级越高）
- 影响说明：权重高的数据源对综合评分影响更大

**性能配置**：
- 缓存时长：1-60分钟（默认5分钟）
- 重试次数：1-10次（默认3次）
- 超时时间：5-120秒（默认30秒）

#### 3.3 AkShare插件配置
**数据源开关**：
- ✅ 新闻情绪：A股新闻情绪分析
- ✅ 微博情绪：微博关注度和情绪
- ✅ VIX指数：市场波动率指标
- ✅ 消费者信心：宏观经济信心指数
- ✅ 外汇情绪：外汇市场情绪

**参数设置**：
- 微博时间周期：近3天/7天/15天/30天
- 数据更新频率：可自定义

#### 3.4 全局服务配置
- 自动刷新：启用/禁用
- 刷新间隔：1-60分钟
- 最大并发数：1-10个

## 使用流程

### 第一次使用

1. **检查插件状态**
   ```
   设置 -> 插件配置 -> 情绪数据源
   点击"刷新状态"按钮
   ```

2. **测试数据连接**
   ```
   选择AkShare插件
   点击"测试连接"按钮
   确认状态显示"连接成功"
   ```

3. **配置数据源**
   ```
   根据需要启用/禁用特定数据源
   调整权重和优先级
   设置合适的缓存时长
   ```

4. **开始使用**
   ```
   打开情绪分析标签页
   点击"实时情绪分析"
   查看真实市场情绪数据
   ```

### 日常使用

1. **查看实时情绪**
   - 在情绪分析标签页点击"实时情绪分析"
   - 观察各项指标变化
   - 参考交易信号和投资建议

2. **解读情绪信号**
   - **极度看涨（>0.6）**: 市场过度乐观，注意风险
   - **看涨（0.2-0.6）**: 市场乐观，可适度操作
   - **中性（-0.2-0.2）**: 市场平稳，正常操作
   - **看跌（-0.6--0.2）**: 市场悲观，谨慎观望
   - **极度看跌（<-0.6）**: 市场恐慌，可能是机会

3. **配合其他分析**
   - 结合技术分析指标
   - 参考基本面信息
   - 关注资金流向数据

## 故障排除

### 常见问题

#### 1. 数据获取失败
**症状**：显示"获取数据失败"或显示模拟数据标识

**解决方案**：
1. 检查网络连接
2. 测试插件连接状态
3. 确认AkShare库是否正确安装
4. 检查API访问限制

#### 2. 数据显示不更新
**症状**：情绪数据长时间不变化

**解决方案**：
1. 点击手动刷新按钮
2. 检查缓存设置是否过长
3. 重启应用程序
4. 清除缓存数据

#### 3. 插件状态异常
**症状**：插件状态显示"连接异常"

**解决方案**：
1. 检查网络连接
2. 重新测试插件连接
3. 调整超时和重试设置
4. 查看错误日志

#### 4. 配置无法保存
**症状**：配置修改后不生效

**解决方案**：
1. 确认点击"应用"按钮
2. 重启应用程序
3. 检查配置文件权限
4. 导出/导入配置备份

### 错误代码说明

| 错误代码 | 含义 | 解决方案 |
|---------|------|---------|
| NETWORK_ERROR | 网络连接失败 | 检查网络连接 |
| API_LIMIT | API调用限制 | 降低请求频率 |
| DATA_INVALID | 数据格式错误 | 联系技术支持 |
| TIMEOUT | 请求超时 | 增加超时时间 |
| AUTH_FAILED | 认证失败 | 检查API密钥 |

## 最佳实践

### 1. 配置建议

**权重设置**：
- AkShare插件：1.0（默认）
- 如有多个数据源，根据可靠性调整权重
- 新闻情绪权重可适当降低（噪音较多）

**缓存策略**：
- 日内交易：缓存1-3分钟
- 中长期分析：缓存5-10分钟
- 避免过于频繁的API调用

**更新频率**：
- 实时监控：5-10分钟自动刷新
- 分析研究：手动刷新即可
- 避免过度依赖单一指标

### 2. 分析技巧

**综合分析**：
- 不要仅凭情绪指标做决策
- 结合技术面和基本面分析
- 关注情绪极值（可能反转信号）

**时间维度**：
- 短期情绪波动较大，适合日内交易参考
- 中期情绪趋势，适合波段操作
- 长期情绪周期，适合趋势判断

**风险控制**：
- 极度乐观时保持谨慎
- 极度悲观时寻找机会
- 设置合理的止损止盈

### 3. 数据质量

**质量评级说明**：
- **Excellent**: 数据完整、及时、准确
- **Good**: 数据基本完整，略有延迟
- **Fair**: 数据部分缺失，但可用
- **Poor**: 数据质量差，建议谨慎使用

**提升数据质量**：
- 启用多个数据源
- 定期测试连接状态
- 关注数据时效性
- 监控异常值

## 技术规格

### 系统要求
- Python 3.7+
- PyQt5
- 网络连接
- 2GB+ 可用内存

### 依赖库
- akshare：数据源
- pandas：数据处理
- numpy：数值计算
- requests：网络请求

### 性能指标
- 响应时间：< 5秒（含网络请求）
- 缓存命中率：> 80%
- 错误率：< 5%
- 内存占用：< 500MB

## 更新日志

### v1.0.0 (2024-01-15)
- ✅ 基础插件架构
- ✅ AkShare数据源集成
- ✅ 情绪数据服务管理器
- ✅ UI组件集成
- ✅ 配置管理界面
- ✅ 自动化测试套件

### 计划功能
- 🔄 东方财富数据源
- 🔄 同花顺数据源
- 🔄 国外数据源支持
- 🔄 机器学习情绪预测
- 🔄 社交媒体情绪分析

## 技术支持

### 获取帮助
- 查看系统日志：`logs/` 目录
- 运行测试脚本：`python tests/test_sentiment_manual.py`
- 检查配置文件：`config/` 目录

### 联系方式
- 项目仓库：HIkyuu-UI GitHub
- 技术文档：`docs/` 目录
- 用户社区：HIkyuu论坛

### 反馈建议
- Bug报告：GitHub Issues
- 功能建议：GitHub Discussions
- 使用问题：用户群交流

---

## 快速参考

### 常用操作
```
启动情绪分析：分析 -> 情绪分析 -> 实时情绪分析
配置插件：设置 -> 插件配置 -> 情绪数据源
测试连接：插件配置 -> 选择插件 -> 测试连接
刷新数据：点击刷新按钮或等待自动刷新
```

### 快捷键
- `F5`：刷新数据
- `Ctrl+,`：打开设置
- `Ctrl+T`：测试连接

### 状态指示
- 🟢 正常：数据获取正常
- 🟡 警告：数据质量一般
- 🔴 错误：数据获取失败
- 🔄 刷新：正在更新数据

希望这份用户指南能帮助您更好地使用HIkyuu-UI的情绪分析功能！ 