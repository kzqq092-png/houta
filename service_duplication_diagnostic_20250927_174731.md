# 服务重复诊断报告

**生成时间**: 2025-09-27 17:47:31

## 📊 诊断结果

### 服务实例状态


### 发现的问题

1. **重复日志问题**
   - AI预测服务重复输出"不支持的预测类型: risk_forecast"警告
   - 性能数据收集重复输出格式化错误

2. **可能的原因**
   - 多个服务实例被创建
   - 事件被重复订阅
   - 插件被重复加载
   - 旧的管理器仍在运行

## 🔧 建议的修复方案

### 1. 修复AI预测服务重复警告
```python
# 在AI预测服务中添加去重逻辑
# 或者检查调用来源，避免重复调用
```

### 2. 修复性能数据收集格式化错误
```python
# 修复performance_data_bridge.py中的字符串格式化
logger.error(f"收集系统指标失败: {str(e)}")
```

### 3. 优化插件发现机制
```python
# 添加插件去重逻辑
# 避免重复加载同名插件
```

### 4. 检查服务生命周期
```python
# 确保服务按照重构方案正确初始化
# 避免创建多个实例
```

## 📋 下一步行动

1. 修复性能数据收集的格式化错误
2. 添加AI预测服务的调用去重
3. 优化插件发现和注册机制
4. 验证服务单例模式的正确性

---

*此报告由服务重复诊断工具生成*
