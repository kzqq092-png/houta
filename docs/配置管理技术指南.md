# é…ç½®ç®¡ç†æŠ€æœ¯æŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¶é—´**: 2025å¹´12æœˆ6æ—¥  
**ç”¨é€”**: ç³»ç»Ÿé…ç½®ç®¡ç†å’Œæœ€ä½³å®è·µæŒ‡å—

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›ç³»ç»Ÿé…ç½®ç®¡ç†çš„å®Œæ•´æŠ€æœ¯æŒ‡å—ï¼ŒåŒ…æ‹¬ç¼“å­˜é…ç½®ã€æ•°æ®æºé…ç½®ã€ç²¾åº¦æ ‡å‡†ç­‰æ ¸å¿ƒé…ç½®é¡¹çš„æœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æ­£ç¡®é…ç½®å’Œç»´æŠ¤ç³»ç»Ÿå‚æ•°ã€‚

---

## ğŸ¯ é…ç½®ç®¡ç†æ¶æ„

### é…ç½®æœåŠ¡æ ¸å¿ƒç»„ä»¶

#### 1. ConfigService é…ç½®æœåŠ¡
- **ä½ç½®**: `core/services/config_service.py`
- **åŠŸèƒ½**: é›†ä¸­ç®¡ç†æ‰€æœ‰ç³»ç»Ÿé…ç½®
- **ç‰¹ç‚¹**: æ”¯æŒé»˜è®¤å€¼ã€ç±»å‹æ£€æŸ¥ã€å®æ—¶æ›´æ–°

#### 2. é…ç½®å±‚æ¬¡ç»“æ„
```
å…¨å±€é…ç½® (ConfigService)
â”œâ”€â”€ ç³»ç»Ÿé…ç½® (system)
â”œâ”€â”€ æ•°æ®é…ç½® (data)
â”œâ”€â”€ ç¼“å­˜é…ç½® (cache)
â”œâ”€â”€ UIé…ç½® (ui)
â””â”€â”€ ä¸šåŠ¡é…ç½® (business)
```

---

## ğŸ”§ ç¼“å­˜é…ç½®ç®¡ç†

### 1. ç¼“å­˜å¯ç”¨é…ç½®

#### åŸºç¡€é…ç½®é¡¹
```python
# ConfigServiceä¸­çš„é»˜è®¤é…ç½®
config = {
    'data': {
        'cache_enabled': True,        # ç¼“å­˜å¯ç”¨çŠ¶æ€
        'cache_size': 1000,          # ç¼“å­˜å¤§å°
        'cache_ttl': 3600,           # ç¼“å­˜ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰
        'update_interval': 2000      # æ›´æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰
    }
}
```

#### UnifiedDataManagerä¸­çš„ç¼“å­˜é…ç½®
```python
class UnifiedDataManager:
    def __init__(self, service_container):
        # ä»é…ç½®æœåŠ¡è¯»å–ç¼“å­˜å¯ç”¨çŠ¶æ€
        try:
            config_service = service_container.get('config_service')
            if config_service:
                self.cache_enabled = config_service.get('data.cache_enabled', True)
                logger.info(f"ç¼“å­˜å¯ç”¨çŠ¶æ€: {self.cache_enabled}")
            else:
                self.cache_enabled = True  # é…ç½®æœåŠ¡ä¸å¯ç”¨æ—¶é»˜è®¤å¯ç”¨
                logger.warning("é…ç½®æœåŠ¡ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤ç¼“å­˜è®¾ç½®")
        except Exception as e:
            self.cache_enabled = True  # å‡ºé”™æ—¶é»˜è®¤å¯ç”¨
            logger.warning(f"è¯»å–ç¼“å­˜é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼: {e}")
    
    def get_asset_list(self):
        if self.cache_enabled:
            self._cache_data(cache_key, asset_list_df)
```

#### ä½¿ç”¨æ¨¡å¼
```python
# 1. å¯ç”¨ç¼“å­˜ï¼ˆæ¨èï¼‰
config_service.set('data.cache_enabled', True)
config_service.set('data.cache_size', 2000)

# 2. ç¦ç”¨ç¼“å­˜ï¼ˆå¼€å‘è°ƒè¯•ï¼‰
config_service.set('data.cache_enabled', False)

# 3. åŠ¨æ€è°ƒæ•´ç¼“å­˜å¤§å°
config_service.set('data.cache_size', 5000)
```

### 2. ç¼“å­˜æœ€ä½³å®è·µ

#### å†…å­˜ä½¿ç”¨ä¼˜åŒ–
```python
# æ™ºèƒ½ç¼“å­˜å¤§å°é…ç½®
cache_strategies = {
    'development': {'cache_size': 500, 'cache_ttl': 1800},
    'production': {'cache_size': 5000, 'cache_ttl': 7200},
    'high_frequency': {'cache_size': 10000, 'cache_ttl': 3600}
}
```

#### ç¼“å­˜é”®ç®¡ç†
```python
def generate_cache_key(prefix: str, params: dict) -> str:
    """ç”Ÿæˆå”¯ä¸€çš„ç¼“å­˜é”®"""
    param_str = json.dumps(params, sort_keys=True)
    return f"{prefix}:{hashlib.md5(param_str.encode()).hexdigest()[:8]}"

# ä½¿ç”¨ç¤ºä¾‹
cache_key = generate_cache_key("stock_list", {
    "market": "sh",
    "asset_type": "stock",
    "update_time": "2025-12-06"
})
```

---

## ğŸ“Š æ•°æ®æºé…ç½®ç®¡ç†

### 1. æ•°æ®æºä¼˜å…ˆçº§é…ç½®

#### å¤šæ•°æ®æºé…ç½®
```python
data_source_config = {
    'data_sources': {
        'primary': 'eastmoney',        # ä¸»è¦æ•°æ®æº
        'fallback': ['akshare', 'sina'], # å¤‡ç”¨æ•°æ®æº
        'retry_attempts': 3,           # é‡è¯•æ¬¡æ•°
        'timeout': 30                  # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    }
}
```

#### æ•°æ®æºå¥åº·æ£€æŸ¥
```python
class DataSourceHealthMonitor:
    def __init__(self, config_service):
        self.config = config_service
        self.health_status = {}
    
    async def check_data_source_health(self, source_name: str):
        """æ£€æŸ¥æ•°æ®æºå¥åº·çŠ¶æ€"""
        try:
            start_time = time.time()
            # æ‰§è¡Œå¥åº·æ£€æŸ¥
            result = await self.test_connection(source_name)
            response_time = time.time() - start_time
            
            self.health_status[source_name] = {
                'status': 'healthy',
                'response_time': response_time,
                'last_check': datetime.now()
            }
            return True
        except Exception as e:
            self.health_status[source_name] = {
                'status': 'unhealthy',
                'error': str(e),
                'last_check': datetime.now()
            }
            return False
```

### 2. æ•°æ®æºæ’ä»¶é…ç½®

#### PluginInfo é…ç½®æ ‡å‡†
```python
class PluginInfo(BaseModel):
    """æ•°æ®æºæ’ä»¶ä¿¡æ¯é…ç½®"""
    name: str
    version: str
    description: str
    supported_data_types: List[DataType]
    supported_asset_types: List[AssetType]
    max_concurrent_requests: int = 10
    rate_limit: int = 100  # æ¯åˆ†é’Ÿè¯·æ±‚æ•°

# æ­£ç¡®é…ç½®ç¤ºä¾‹
@property
def plugin_info(self) -> PluginInfo:
    return PluginInfo(
        name="EastMoney Data Plugin",
        version="1.0.0",
        description="ä¸œæ–¹è´¢å¯Œæ•°æ®æºæ’ä»¶",
        supported_data_types=[
            DataType.HISTORICAL_KLINE,
            DataType.REAL_TIME_QUOTE,
            DataType.FUNDAMENTAL
        ],
        supported_asset_types=[AssetType.STOCK, AssetType.ETF],
        max_concurrent_requests=20,
        rate_limit=200
    )
```

---

## ğŸ”¢ ç²¾åº¦æ ‡å‡†é…ç½®

### 1. å°æ•°ç‚¹ç²¾åº¦é…ç½®

#### æ ‡å‡†ç²¾åº¦é…ç½®
```python
precision_standards = {
    'price': {
        'default': 2,        # ä»·æ ¼é»˜è®¤2ä½å°æ•°
        'stock': 2,          # è‚¡ç¥¨ä»·æ ¼
        'forex': 4,          # å¤–æ±‡ä»·æ ¼
        'crypto': 8          # åŠ å¯†è´§å¸ä»·æ ¼
    },
    'volume': {
        'default': 0,        # æˆäº¤é‡é»˜è®¤æ•´æ•°
        'stock': 0,          # è‚¡ç¥¨æˆäº¤é‡
        'future': 2          # æœŸè´§æˆäº¤é‡
    },
    'percentage': {
        'default': 4,        # ç™¾åˆ†æ¯”é»˜è®¤4ä½å°æ•°
        'return': 6,         # æ”¶ç›Šç‡6ä½å°æ•°
        'ratio': 4           # æ¯”ç‡4ä½å°æ•°
    }
}
```

#### åŠ¨æ€ç²¾åº¦è°ƒæ•´
```python
class PrecisionManager:
    def __init__(self, config_service):
        self.config = config_service
        self.precision_rules = config_service.get('precision_standards', {})
    
    def get_precision(self, data_type: str, field: str) -> int:
        """è·å–å­—æ®µç²¾åº¦"""
        type_config = self.precision_rules.get(data_type, {})
        return type_config.get(field, type_config.get('default', 2))
    
    def format_value(self, value: float, data_type: str, field: str) -> str:
        """æ ¼å¼åŒ–æ•°å€¼"""
        precision = self.get_precision(data_type, field)
        return f"{value:.{precision}f}"
```

### 2. DataTypeæšä¸¾é…ç½®

#### æ­£ç¡®çš„DataTypeæšä¸¾å€¼
```python
from enum import Enum

class DataType(Enum):
    """æ•°æ®ç±»å‹æšä¸¾ - æ­£ç¡®å®šä¹‰"""
    HISTORICAL_KLINE = "historical_kline"      # å†å²Kçº¿æ•°æ®
    REAL_TIME_QUOTE = "real_time_quote"        # å®æ—¶è¡Œæƒ…
    TICK_DATA = "tick_data"                    # Tickæ•°æ®
    FINANCIAL_STATEMENT = "financial_statement" # è´¢åŠ¡æŠ¥è¡¨ï¼ˆå•æ•°ï¼‰
    FUNDAMENTAL = "fundamental"                # åŸºæœ¬é¢æ•°æ®
    ANNOUNCEMENT = "announcement"              # å…¬å‘Šæ•°æ®

# âŒ é”™è¯¯çš„æšä¸¾å€¼ï¼ˆå¸¸è§é”™è¯¯ï¼‰
WRONG_DATATYPES = [
    DataType.KLINE,           # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯HISTORICAL_KLINE
    DataType.REALTIME,        # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯REAL_TIME_QUOTE
    DataType.TICK,            # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯TICK_DATA
    DataType.FINANCIAL_STATEMENTS,  # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯FINANCIAL_STATEMENT
    DataType.COMPANY_ANNOUNCEMENTS  # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯ANNOUNCEMENT
]

# âœ… æ­£ç¡®çš„æšä¸¾å€¼ä½¿ç”¨
CORRECT_USAGE = [
    DataType.HISTORICAL_KLINE,      # âœ… æ­£ç¡®ï¼šå†å²Kçº¿æ•°æ®
    DataType.REAL_TIME_QUOTE,       # âœ… æ­£ç¡®ï¼šå®æ—¶è¡Œæƒ…
    DataType.TICK_DATA,             # âœ… æ­£ç¡®ï¼šTickæ•°æ®
    DataType.FINANCIAL_STATEMENT,   # âœ… æ­£ç¡®ï¼šè´¢åŠ¡æŠ¥è¡¨
    DataType.ANNOUNCEMENT           # âœ… æ­£ç¡®ï¼šå…¬å‘Šæ•°æ®
]
```

#### æ’ä»¶é…ç½®ä¸­çš„DataTypeä½¿ç”¨
```python
class DataSourcePlugin:
    def __init__(self):
        self.supported_data_types = [
            DataType.HISTORICAL_KLINE,      # å†å²Kçº¿æ•°æ®
            DataType.REAL_TIME_QUOTE,       # å®æ—¶è¡Œæƒ…
            DataType.FUNDAMENTAL            # åŸºæœ¬é¢æ•°æ®
        ]
    
    # âœ… æ­£ç¡®çš„plugin_infoå±æ€§å®šä¹‰ï¼ˆä½¿ç”¨@propertyè£…é¥°å™¨ï¼‰
    @property
    def plugin_info(self) -> PluginInfo:
        return PluginInfo(
            name=self.__class__.__name__,
            version="1.0.0",
            description="æ•°æ®æºæ’ä»¶",
            supported_data_types=self.supported_data_types,
            supported_asset_types=[AssetType.STOCK, AssetType.ETF],
            max_concurrent_requests=20,
            rate_limit=200
        )
```

#### å¸¸è§DataTypeä½¿ç”¨é”™è¯¯ä¿®å¤
```python
# âŒ é”™è¯¯çš„ä½¿ç”¨æ–¹å¼
def get_data_type_config():
    return {
        'data_types': [
            DataType.KLINE,              # âŒ é”™è¯¯
            DataType.REALTIME,           # âŒ é”™è¯¯
            DataType.FINANCIAL_STATEMENTS, # âŒ é”™è¯¯
        ]
    }

# âœ… æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
def get_data_type_config():
    return {
        'data_types': [
            DataType.HISTORICAL_KLINE,      # âœ… æ­£ç¡®
            DataType.REAL_TIME_QUOTE,       # âœ… æ­£ç¡®
            DataType.FINANCIAL_STATEMENT,   # âœ… æ­£ç¡®
        ]
    }

# æ•°æ®æºè·¯ç”±å™¨ä¸­çš„DataTypeä½¿ç”¨
class DataSourceRouter:
    def get_available_sources(self, data_type: DataType):
        """æ ¹æ®æ•°æ®ç±»å‹è·å–å¯ç”¨æ•°æ®æº"""
        source_mapping = {
            DataType.HISTORICAL_KLINE: ['eastmoney', 'akshare'],
            DataType.REAL_TIME_QUOTE: ['eastmoney', 'sina'],
            DataType.TICK_DATA: ['eastmoney', 'akshare'],
            DataType.FINANCIAL_STATEMENT: ['eastmoney', 'cninfo'],
            DataType.ANNOUNCEMENT: ['cninfo', 'eastmoney'],
        }
        return source_mapping.get(data_type, [])
```

### 2. æ•°æ®éªŒè¯é…ç½®

#### ç²¾åº¦éªŒè¯è§„åˆ™
```python
validation_rules = {
    'price': {
        'min_value': 0.01,
        'max_value': 999999.99,
        'precision': 2
    },
    'volume': {
        'min_value': 0,
        'max_value': 999999999999,
        'precision': 0
    },
    'percentage': {
        'min_value': -100.0,
        'max_value': 100.0,
        'precision': 4
    }
}
```

---

## ğŸ§ª æµ‹è¯•é…ç½®ç®¡ç†

### 1. æµ‹è¯•ç¯å¢ƒé…ç½®

#### æµ‹è¯•æ•°æ®é…ç½®
```python
test_config = {
    'environment': 'test',
    'database': {
        'test_db_path': ':memory:',  # å†…å­˜æ•°æ®åº“
        'cleanup_after_test': True
    },
    'cache': {
        'enabled': False,  # æµ‹è¯•æ—¶ç¦ç”¨ç¼“å­˜
        'mock_responses': True
    },
    'data_sources': {
        'use_mock': True,
        'mock_delay': 0.1  # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    }
}
```

#### æµ‹è¯•é…ç½®ç®¡ç†å™¨
```python
class TestConfigManager:
    def __init__(self):
        self.original_config = {}
        self.test_config = test_config
    
    def setup_test_environment(self):
        """è®¾ç½®æµ‹è¯•ç¯å¢ƒ"""
        # å¤‡ä»½åŸå§‹é…ç½®
        config_service = self.get_config_service()
        self.original_config = config_service.get_all()
        
        # åº”ç”¨æµ‹è¯•é…ç½®
        for key, value in self.test_config.items():
            config_service.set(key, value)
    
    def restore_original_config(self):
        """æ¢å¤åŸå§‹é…ç½®"""
        config_service = self.get_config_service()
        for key, value in self.original_config.items():
            config_service.set(key, value)
```

### 2. è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®

#### æµ‹è¯•å¥—ä»¶é…ç½®
```python
test_suites = {
    'unit_tests': {
        'enabled': True,
        'coverage_threshold': 80,
        'parallel_execution': True
    },
    'integration_tests': {
        'enabled': True,
        'database': 'test_db',
        'timeout': 300
    },
    'api_tests': {
        'enabled': True,
        'base_url': 'http://localhost:8080',
        'rate_limit': 10
    }
}
```

---

## ğŸ› ï¸ é…ç½®æœ€ä½³å®è·µ

### 1. é…ç½®åˆ†å±‚ç®¡ç†

#### ç¯å¢ƒç‰¹å®šé…ç½®
```python
config_layers = {
    'default': 'core/config/default.yaml',      # é»˜è®¤é…ç½®
    'development': 'core/config/dev.yaml',      # å¼€å‘ç¯å¢ƒ
    'testing': 'core/config/test.yaml',         # æµ‹è¯•ç¯å¢ƒ
    'production': 'core/config/prod.yaml'       # ç”Ÿäº§ç¯å¢ƒ
}

def load_environment_config(env: str):
    """åŠ è½½ç¯å¢ƒç‰¹å®šé…ç½®"""
    default_config = load_yaml(config_layers['default'])
    env_config = load_yaml(config_layers.get(env, config_layers['default']))
    return merge_configs(default_config, env_config)
```

### 2. é…ç½®éªŒè¯

#### é…ç½®SchemaéªŒè¯
```python
from pydantic import BaseModel, validator

class DataConfig(BaseModel):
    cache_enabled: bool = True
    cache_size: int = 1000
    update_interval: int = 2000
    data_sources: List[str] = ['hikyuu', 'eastmoney']
    
    @validator('cache_size')
    def validate_cache_size(cls, v):
        if v <= 0:
            raise ValueError('cache_sizeå¿…é¡»å¤§äº0')
        if v > 100000:
            raise ValueError('cache_sizeä¸èƒ½è¶…è¿‡100000')
        return v
    
    @validator('update_interval')
    def validate_update_interval(cls, v):
        if v < 100:
            raise ValueError('update_intervalä¸èƒ½å°äº100ms')
        if v > 60000:
            raise ValueError('update_intervalä¸èƒ½è¶…è¿‡60ç§’')
        return v
```

### 3. é…ç½®çƒ­æ›´æ–°

#### åŠ¨æ€é…ç½®æ›´æ–°
```python
class ConfigWatcher:
    def __init__(self, config_service, watch_files: List[str]):
        self.config_service = config_service
        self.watch_files = watch_files
        self.last_modified = {}
    
    async def start_watching(self):
        """å¼€å§‹ç›‘æ§é…ç½®æ–‡ä»¶å˜åŒ–"""
        while True:
            for file_path in self.watch_files:
                if self._file_modified(file_path):
                    await self._reload_config(file_path)
            await asyncio.sleep(5)  # æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
    
    async def _reload_config(self, file_path: str):
        """é‡æ–°åŠ è½½é…ç½®"""
        try:
            new_config = load_yaml(file_path)
            self.config_service.update(new_config)
            logger.info(f"é…ç½®å·²æ›´æ–°: {file_path}")
        except Exception as e:
            logger.error(f"é…ç½®æ›´æ–°å¤±è´¥: {e}")
```

---

## ğŸ”§ å¸¸è§é…ç½®é—®é¢˜è§£å†³

### 1. é…ç½®æœåŠ¡ä¸å¯ç”¨

#### é—®é¢˜ç—‡çŠ¶
```
WARNING | é…ç½®æœåŠ¡ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤ç¼“å­˜è®¾ç½®
AttributeError: 'NoneType' object has no attribute 'get'
```

#### è§£å†³æ–¹æ¡ˆ
```python
# æ–¹æ¡ˆ1: å¤šå±‚é˜²æŠ¤é…ç½®
def get_config_with_fallback(key: str, default_value):
    try:
        config_service = service_container.get('config_service')
        if config_service:
            return config_service.get(key, default_value)
        else:
            logger.warning("é…ç½®æœåŠ¡ä¸å¯ç”¨ï¼Œä½¿ç”¨é»˜è®¤å€¼")
            return default_value
    except Exception as e:
        logger.warning(f"è¯»å–é…ç½®å¤±è´¥: {e}ï¼Œä½¿ç”¨é»˜è®¤å€¼")
        return default_value

# æ–¹æ¡ˆ2: é…ç½®æœåŠ¡é™çº§
class FallbackConfigService:
    def __init__(self, primary_service):
        self.primary = primary_service
        self.fallback_config = get_default_config()
    
    def get(self, key: str, default=None):
        try:
            return self.primary.get(key, default)
        except:
            return self.fallback_config.get(key, default)
```

### 2. é…ç½®é¡¹ç±»å‹é”™è¯¯

#### é—®é¢˜ç—‡çŠ¶
```
TypeError: unsupported operand type(s) for +: 'int' and 'str'
```

#### è§£å†³æ–¹æ¡ˆ
```python
# ç±»å‹å®‰å…¨é…ç½®è·å–
def get_typed_config(config_service, key: str, expected_type: type, default):
    """å®‰å…¨è·å–é…ç½®å¹¶è½¬æ¢ç±»å‹"""
    try:
        value = config_service.get(key, default)
        if isinstance(value, expected_type):
            return value
        else:
            logger.warning(f"é…ç½®é¡¹ {key} ç±»å‹ä¸åŒ¹é…ï¼ŒæœŸæœ› {expected_type.__name__}ï¼Œå®é™… {type(value).__name__}")
            return default
    except Exception as e:
        logger.error(f"è¯»å–é…ç½®é¡¹ {key} å¤±è´¥: {e}")
        return default

# ä½¿ç”¨ç¤ºä¾‹
cache_size = get_typed_config(config_service, 'data.cache_size', int, 1000)
cache_enabled = get_typed_config(config_service, 'data.cache_enabled', bool, True)
```

### 3. é…ç½®å†²çª

#### é—®é¢˜ç—‡çŠ¶
```
ValueError: é…ç½®å†²çª: cache_enabled åœ¨å¤šä¸ªä½ç½®å®šä¹‰
```

#### è§£å†³æ–¹æ¡ˆ
```python
class ConfigConflictResolver:
    def __init__(self):
        self.conflict_rules = {
            'cache_enabled': 'override',    # è¦†ç›–æ¨¡å¼
            'cache_size': 'merge_max',      # å–æœ€å¤§å€¼
            'data_sources': 'merge_unique'  # åˆå¹¶å»é‡
        }
    
    def resolve_conflicts(self, configs: List[dict]) -> dict:
        """è§£å†³é…ç½®å†²çª"""
        resolved = {}
        
        for config in configs:
            for key, value in config.items():
                if key in resolved:
                    resolved[key] = self._resolve_conflict(key, resolved[key], value)
                else:
                    resolved[key] = value
        
        return resolved
    
    def _resolve_conflict(self, key: str, old_value, new_value):
        rule = self.conflict_rules.get(key, 'override')
        
        if rule == 'override':
            return new_value
        elif rule == 'merge_max':
            return max(old_value, new_value)
        elif rule == 'merge_unique':
            return list(set(old_value + new_value))
        else:
            return new_value
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–é…ç½®

### 1. ç¼“å­˜æ€§èƒ½è°ƒä¼˜

#### é«˜æ€§èƒ½ç¼“å­˜é…ç½®
```python
high_performance_config = {
    'cache': {
        'enabled': True,
        'backend': 'redis',           # ä½¿ç”¨Redisç¼“å­˜
        'cluster_mode': True,         # é›†ç¾¤æ¨¡å¼
        'connection_pool_size': 50,   # è¿æ¥æ± å¤§å°
        'compression': True,          # å¯ç”¨å‹ç¼©
        'ttl_strategy': 'adaptive'    # è‡ªé€‚åº”TTL
    }
}
```

### 2. æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

#### è¿æ¥æ± é…ç½®è°ƒä¼˜
```python
connection_pool_config = {
    'pool_size': 20,          # åŸºç¡€è¿æ¥æ•°
    'max_overflow': 30,       # æœ€å¤§æº¢å‡ºè¿æ¥
    'pool_timeout': 30,       # è·å–è¿æ¥è¶…æ—¶
    'pool_recycle': 3600,     # è¿æ¥å›æ”¶æ—¶é—´
    'pool_pre_ping': True,    # é¢„æ£€æŸ¥è¿æ¥
    'use_lifo': True          # åè¿›å…ˆå‡º
}
```

---

## ğŸ”’ å®‰å…¨é…ç½®

### 1. æ•æ„Ÿä¿¡æ¯ç®¡ç†

#### å®‰å…¨é…ç½®æœ€ä½³å®è·µ
```python
security_config = {
    'secrets': {
        'storage': 'environment',  # ç¯å¢ƒå˜é‡å­˜å‚¨
        'encryption': True,        # å¯ç”¨åŠ å¯†
        'rotation_days': 90        # å¯†é’¥è½®æ¢å‘¨æœŸ
    },
    'access_control': {
        'require_auth': True,
        'session_timeout': 1800,   # 30åˆ†é’Ÿ
        'rate_limiting': {
            'requests_per_minute': 100,
            'burst_limit': 20
        }
    }
}
```

---

## ğŸ“š é…ç½®æ–‡æ¡£ç»´æŠ¤

### 1. é…ç½®æ–‡æ¡£æ›´æ–°æµç¨‹

#### æ–‡æ¡£ç”Ÿæˆå·¥å…·
```python
class ConfigDocGenerator:
    def __init__(self, config_service):
        self.config_service = config_service
    
    def generate_config_docs(self):
        """ç”Ÿæˆé…ç½®æ–‡æ¡£"""
        docs = []
        docs.append("# ç³»ç»Ÿé…ç½®æ–‡æ¡£\n")
        
        for section, config in self.config_service.get_all().items():
            docs.append(f"## {section}\n")
            docs.append(self._format_config_section(config))
            docs.append("\n")
        
        return "\n".join(docs)
    
    def _format_config_section(self, config: dict) -> str:
        """æ ¼å¼åŒ–é…ç½®ç« èŠ‚"""
        lines = []
        for key, value in config.items():
            if isinstance(value, dict):
                lines.append(f"### {key}")
                lines.append(self._format_config_section(value))
            else:
                lines.append(f"- **{key}**: {value}")
        return "\n".join(lines)
```

---

## ğŸ¯ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **ç»Ÿä¸€é…ç½®ç®¡ç†**: ä½¿ç”¨ConfigServiceé›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®
2. **åˆ†å±‚é…ç½®ç­–ç•¥**: åŒºåˆ†é»˜è®¤é…ç½®ã€ç¯å¢ƒç‰¹å®šé…ç½®
3. **ç±»å‹å®‰å…¨**: ä½¿ç”¨SchemaéªŒè¯ç¡®ä¿é…ç½®ç±»å‹æ­£ç¡®
4. **å®¹é”™æœºåˆ¶**: æä¾›é»˜è®¤å€¼å’Œé™çº§æ–¹æ¡ˆ
5. **çƒ­æ›´æ–°æ”¯æŒ**: æ”¯æŒè¿è¡Œæ—¶é…ç½®æ›´æ–°
6. **æ€§èƒ½ä¼˜åŒ–**: æ ¹æ®åœºæ™¯è°ƒæ•´ç¼“å­˜å’Œè¿æ¥æ± é…ç½®

### æœ€ä½³å®è·µ

- âœ… å§‹ç»ˆæä¾›åˆç†çš„é»˜è®¤å€¼
- âœ… å®ç°é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- âœ… å®šæœŸå®¡æŸ¥å’Œæ›´æ–°é…ç½®æ–‡æ¡£
- âœ… å»ºç«‹é…ç½®å˜æ›´çš„å®¡æŸ¥æµç¨‹

---

**æœ¬æ–‡æ¡£å°†éšç€ç³»ç»Ÿå‘å±•æŒç»­æ›´æ–°ç»´æŠ¤ã€‚**