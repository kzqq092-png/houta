# å›æµ‹ç³»ç»Ÿæ·±åº¦æ€§èƒ½åˆ†ææŠ¥å‘Š
============================================================

## ğŸ“Š åˆ†æç»Ÿè®¡
- åˆ†ææ–‡ä»¶æ•°: 7
- åˆ†ææ–¹æ³•æ•°: 153
- å‘ç°é—®é¢˜æ•°: 25
- ç“¶é¢ˆæ–¹æ³•æ•°: 11

## âš ï¸ æ€§èƒ½é—®é¢˜è¯¦æƒ…

### 1. backtest_strategy_fixed (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:972)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 11
**é—®é¢˜åˆ—è¡¨**:
- å‚æ•°è¿‡å¤š (11 ä¸ª)

### 2. _run_core_backtest (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:287)
**å¤æ‚åº¦**: 3 | **å‚æ•°æ•°**: 13
**é—®é¢˜åˆ—è¡¨**:
- å‚æ•°è¿‡å¤š (13 ä¸ª)

### 3. _process_trading_signals (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:398)
**å¤æ‚åº¦**: 7 | **å‚æ•°æ•°**: 9
**é—®é¢˜åˆ—è¡¨**:
- å‚æ•°è¿‡å¤š (9 ä¸ª)

### 4. _calculate_max_drawdown_duration (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:683)
**å¤æ‚åº¦**: 6 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 5. _calculate_omega_ratio (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:705)
**å¤æ‚åº¦**: 2 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 6. _calculate_tail_ratio (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:716)
**å¤æ‚åº¦**: 2 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 7. _calculate_common_sense_ratio (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:726)
**å¤æ‚åº¦**: 2 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 8. _extract_benchmark_returns (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:733)
**å¤æ‚åº¦**: 5 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 9. _calculate_max_drawdown_from_equity (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py:855)
**å¤æ‚åº¦**: 2 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (1 ä¸ª)

### 10. _monitor_loop (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\real_time_backtest_monitor.py:260)
**å¤æ‚åº¦**: 7 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«é˜»å¡è°ƒç”¨ (sleep)

### 11. run_backtest (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\plugins\strategies\hikyuu_strategy_plugin.py:167)
**å¤æ‚åº¦**: 4 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«æ•°æ®åº“æ“ä½œ

### 12. calculate_performance (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\plugins\strategies\backtrader_strategy_plugin.py:510)
**å¤æ‚åº¦**: 18 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- å¤æ‚åº¦è¿‡é«˜ (18)

### 13. get_latest_metric (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\core\metrics\repository.py:302)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«æ•°æ®åº“æ“ä½œ

### 14. query_historical_data (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\core\metrics\repository.py:451)
**å¤æ‚åº¦**: 20 | **å‚æ•°æ•°**: 5
**é—®é¢˜åˆ—è¡¨**:
- å¤æ‚åº¦è¿‡é«˜ (20)
- åµŒå¥—å¾ªç¯è¿‡å¤š (4 ä¸ª)
- åŒ…å«æ•°æ®åº“æ“ä½œ
- åŒ…å«æ•°æ®åº“æ“ä½œ
- åŒ…å«æ•°æ®åº“æ“ä½œ

### 15. setup_chart (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:149)
**å¤æ‚åº¦**: 3 | **å‚æ•°æ•°**: 1
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 16. update_charts (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:170)
**å¤æ‚åº¦**: 6 | **å‚æ•°æ•°**: 1
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 17. update_metrics (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:309)
**å¤æ‚åº¦**: 2 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 18. init_backtest_components (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:752)
**å¤æ‚åº¦**: 4 | **å‚æ•°æ•°**: 1
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (2 ä¸ª)

### 19. start_backtest (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:775)
**å¤æ‚åº¦**: 4 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- è£¸éœ²å¼‚å¸¸å¤„ç† (2 ä¸ª)

### 20. start_monitoring (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:829)
**å¤æ‚åº¦**: 4 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«é˜»å¡è°ƒç”¨ (sleep)

### 21. monitoring_loop (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:833)
**å¤æ‚åº¦**: 4 | **å‚æ•°æ•°**: 0
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«é˜»å¡è°ƒç”¨ (sleep)

### 22. log (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:79)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 3
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 23. info (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:82)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 24. warning (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:85)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

### 25. error (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\gui\widgets\backtest_widget.py:88)
**å¤æ‚åº¦**: 1 | **å‚æ•°æ•°**: 2
**é—®é¢˜åˆ—è¡¨**:
- åŒ…å«I/Oæ“ä½œ

## ğŸ”¥ æ€§èƒ½ç“¶é¢ˆæ–¹æ³• (Top 10)
1. **query_historical_data** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\core\metrics\repository.py) - é£é™©è¯„åˆ†: 30
2. **calculate_performance** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\plugins\strategies\backtrader_strategy_plugin.py) - é£é™©è¯„åˆ†: 21
3. **_check_exit_conditions** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py) - é£é™©è¯„åˆ†: 20
4. **_vectorized_backtest_core** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\backtest_optimizer.py) - é£é™©è¯„åˆ†: 19
5. **_run_core_backtest** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py) - é£é™©è¯„åˆ†: 17
6. **_process_trading_signals** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py) - é£é™©è¯„åˆ†: 17
7. **create_trading_system** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\plugins\strategies\hikyuu_strategy_plugin.py) - é£é™©è¯„åˆ†: 17
8. **query_metrics** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\core\metrics\repository.py) - é£é™©è¯„åˆ†: 17
9. **backtest_strategy_fixed** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py) - é£é™©è¯„åˆ†: 13
10. **_execute_open_position** (D:\DevelopTool\FreeCode\HIkyuu-UI\hikyuu-ui\backtest\unified_backtest_engine.py) - é£é™©è¯„åˆ†: 11

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### HIGH - å¼‚å¸¸å¤„ç†
**é—®é¢˜**: ä¿®å¤è£¸éœ²çš„å¼‚å¸¸å¤„ç†è¯­å¥
**å»ºè®®**: å°† except: æ”¹ä¸ºå…·ä½“çš„å¼‚å¸¸ç±»å‹ï¼Œå¦‚ except Exception as e:
**å½±å“æ–¹æ³•**: _calculate_max_drawdown_duration, _calculate_omega_ratio, _calculate_tail_ratio, _calculate_common_sense_ratio, _extract_benchmark_returns ç­‰ 8 ä¸ªæ–¹æ³•

### MEDIUM - ä»£ç å¤æ‚åº¦
**é—®é¢˜**: é‡æ„å¤æ‚åº¦è¿‡é«˜çš„æ–¹æ³•
**å»ºè®®**: å°†å¤æ‚æ–¹æ³•æ‹†åˆ†ä¸ºå¤šä¸ªå°æ–¹æ³•ï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
**å½±å“æ–¹æ³•**: calculate_performance, query_historical_data

### MEDIUM - å‚æ•°ç®¡ç†
**é—®é¢˜**: å‡å°‘æ–¹æ³•å‚æ•°æ•°é‡
**å»ºè®®**: ä½¿ç”¨é…ç½®å¯¹è±¡æˆ–æ•°æ®ç±»æ¥å°è£…å¤šä¸ªå‚æ•°
**å½±å“æ–¹æ³•**: backtest_strategy_fixed, _run_core_backtest, _process_trading_signals

### HIGH - æ€§èƒ½ä¼˜åŒ–
**é—®é¢˜**: ä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆæ–¹æ³•
**å»ºè®®**: å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–ï¼Œè€ƒè™‘ç¼“å­˜ã€å¹¶è¡ŒåŒ–æˆ–ç®—æ³•æ”¹è¿›
**å½±å“æ–¹æ³•**: query_historical_data, calculate_performance, _check_exit_conditions, _vectorized_backtest_core, _run_core_backtest

## ğŸ“ˆ è°ƒç”¨å¤æ‚åº¦åˆ†æ
**æœ€å¤æ‚çš„æ–¹æ³•**:
- **query_historical_data**: å¤æ‚åº¦ 20, è°ƒç”¨ 50 ä¸ªæ–¹æ³•, 5 ä¸ªå‚æ•°
- **calculate_performance**: å¤æ‚åº¦ 18, è°ƒç”¨ 31 ä¸ªæ–¹æ³•, 2 ä¸ªå‚æ•°
- **create_trading_system**: å¤æ‚åº¦ 15, è°ƒç”¨ 19 ä¸ªæ–¹æ³•, 2 ä¸ªå‚æ•°
- **_check_exit_conditions**: å¤æ‚åº¦ 14, è°ƒç”¨ 0 ä¸ªæ–¹æ³•, 6 ä¸ªå‚æ•°
- **_vectorized_backtest_core**: å¤æ‚åº¦ 13, è°ƒç”¨ 6 ä¸ªæ–¹æ³•, 6 ä¸ªå‚æ•°
- **query_metrics**: å¤æ‚åº¦ 11, è°ƒç”¨ 15 ä¸ªæ–¹æ³•, 6 ä¸ªå‚æ•°
- **_calculate_unified_risk_metrics**: å¤æ‚åº¦ 8, è°ƒç”¨ 38 ä¸ªæ–¹æ³•, 3 ä¸ªå‚æ•°
- **_align_portfolio_data**: å¤æ‚åº¦ 8, è°ƒç”¨ 12 ä¸ªæ–¹æ³•, 2 ä¸ªå‚æ•°
- **_calculate_optimization_metric**: å¤æ‚åº¦ 8, è°ƒç”¨ 16 ä¸ªæ–¹æ³•, 3 ä¸ªå‚æ•°
- **aggregate_metrics**: å¤æ‚åº¦ 8, è°ƒç”¨ 11 ä¸ªæ–¹æ³•, 5 ä¸ªå‚æ•°