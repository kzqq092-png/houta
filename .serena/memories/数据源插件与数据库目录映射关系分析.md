# 数据源插件与数据库目录映射关系分析

## 1. 数据源插件现状（实际存在）

### 已实现的插件类型
- **股票插件** (plugins/data_sources/stock/):
  - akshare_plugin.py - 支持 AssetType.STOCK, AssetType.SECTOR
  - tongdaxin_plugin.py - 支持 AssetType.STOCK
  - eastmoney_plugin.py - 支持 AssetType.STOCK
  - level2_realtime_plugin.py - 支持 AssetType.STOCK
  - sina_plugin.py - 支持 AssetType.STOCK

- **加密货币插件** (plugins/data_sources/crypto/):
  - binance_plugin.py - 支持 AssetType.CRYPTO
  - coinbase_plugin.py - 支持 AssetType.CRYPTO
  - crypto_universal_plugin.py - 支持 AssetType.CRYPTO
  - huobi_plugin.py - 支持 AssetType.CRYPTO
  - okx_plugin.py - 支持 AssetType.CRYPTO

- **期货插件** (plugins/data_sources/futures/):
  - wenhua_plugin.py - 支持 AssetType.FUTURES

- **国际股票插件** (plugins/data_sources/stock_international/):
  - yahoo_finance_plugin.py - 支持 AssetType.STOCK

- **基本面数据插件** (plugins/data_sources/fundamental_data_plugins/):
  - eastmoney_fundamental_plugin.py - 支持 AssetType.STOCK, AssetType.FUND

## 2. 数据库目录映射问题

### 关键发现：AssetType映射逻辑
**文件**: core/asset_database_manager.py:381-382
```python
# 别名映射：STOCK → STOCK_A（通用股票默认为A股，面向中国用户）
if asset_type == AssetType.STOCK:
    asset_type = AssetType.STOCK_A
```

### 映射关系
- AssetType.STOCK → 实际存储到 stock_a/ 目录
- AssetType.CRYPTO → 存储到 crypto/ 目录
- AssetType.FUTURES → 存储到 futures/ 目录
- AssetType.STOCK_A → 存储到 stock_a/ 目录

## 3. 数据库文件状态

### 有数据的数据库
- ✅ stock_a/stock_a_data.duckdb (25MB) - 有实际数据

### 空数据库（插件存在但无数据）
- ❌ crypto/crypto_data.duckdb - 空数据库
- ❌ futures/futures_data.duckdb - 空数据库  
- ❌ stock/stock_data.duckdb - 空数据库

## 4. 问题根本原因

### 插件与数据库脱节
1. **插件存在**: 系统有完整的CRYPTO、FUTURES等插件
2. **数据库空**: 对应的数据库文件存在但无数据
3. **业务逻辑缺失**: 没有业务逻辑调用这些插件存储数据

### 调用链断裂
- 只有A股数据有完整的调用链：UI → 导入引擎 → 插件 → 数据库
- 其他资产类型：插件存在，但无UI界面，无业务逻辑调用

## 5. 结论

系统确实有很多资产类型的数据源插件，但存在以下问题：
1. 插件实现完整，但业务逻辑不完整
2. 数据库目录创建了，但无实际数据存储
3. 只有A股有完整的端到端功能
4. 其他资产类型需要完善UI界面和业务逻辑