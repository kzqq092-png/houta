# é€šç”¨ç½‘ç»œé…ç½®ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

é€šç”¨ç½‘ç»œé…ç½®ç³»ç»Ÿä¸ºæ‰€æœ‰éœ€è¦ç½‘ç»œè¿æ¥çš„æ’ä»¶æä¾›äº†ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒç«¯ç‚¹åœ°å€é…ç½®ã€ä»£ç†è®¾ç½®ã€é¢‘ç‡é™åˆ¶ç­‰åŠŸèƒ½ã€‚ç³»ç»Ÿå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- **ç»Ÿä¸€ç®¡ç†**: æ‰€æœ‰æ’ä»¶çš„ç½‘ç»œé…ç½®åœ¨ä¸€ä¸ªç•Œé¢ä¸­ç®¡ç†
- **æ™ºèƒ½é…ç½®**: è‡ªåŠ¨è·å–æ’ä»¶çš„é»˜è®¤ç«¯ç‚¹åœ°å€
- **çµæ´»ç¼–è¾‘**: æ”¯æŒåˆ†å·åˆ†éš”çš„å¤šåœ°å€ç¼–è¾‘æ–¹å¼
- **è‡ªåŠ¨æ³¨å†Œ**: å¯åŠ¨æ—¶è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œæ”¯æŒç½‘ç»œé…ç½®çš„æ’ä»¶
- **å®æ—¶ç»Ÿè®¡**: æä¾›è¯¦ç»†çš„ç½‘ç»œè¯·æ±‚ç»Ÿè®¡å’ŒçŠ¶æ€ç›‘æ§

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿåˆå§‹åŒ–

åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆå§‹åŒ–æ‰€æœ‰ç½‘ç»œé…ç½®ï¼š

```python
from core.app_initialization import startup_initialization

# åœ¨åº”ç”¨main.pyä¸­è°ƒç”¨
results = startup_initialization()
```

### 2. æŸ¥çœ‹æ”¯æŒçš„æ’ä»¶

ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰«æä»¥ä¸‹æ’ä»¶ï¼š
- **AkShareæƒ…ç»ªæ•°æ®æºæ’ä»¶**: æ”¯æŒAkShare APIé…ç½®
- **ä¸œæ–¹è´¢å¯Œè‚¡ç¥¨æ’ä»¶**: æ”¯æŒä¸œæ–¹è´¢å¯ŒAPIé…ç½®  
- **TDXé€šè¾¾ä¿¡æ’ä»¶**: æ”¯æŒé€šè¾¾ä¿¡æœåŠ¡å™¨é…ç½®
- **VIXææ…ŒæŒ‡æ•°æ’ä»¶**: æ”¯æŒVIXæ•°æ®æºé…ç½®
- **æ–°é—»æƒ…ç»ªæ’ä»¶**: æ”¯æŒæ–°é—»APIé…ç½®
- **åŠ å¯†è´§å¸æ’ä»¶**: æ”¯æŒå„å¤§äº¤æ˜“æ‰€APIé…ç½®

### 3. è®¿é—®ç½‘ç»œé…ç½®ç•Œé¢

åœ¨æ•°æ®æºé…ç½®å¯¹è¯æ¡†ä¸­ï¼Œæ”¯æŒç½‘ç»œé…ç½®çš„æ’ä»¶ä¼šè‡ªåŠ¨æ˜¾ç¤º"ç½‘ç»œé…ç½®"æ ‡ç­¾é¡µã€‚

---

## ğŸ“‹ ç•Œé¢åŠŸèƒ½è¯¦è§£

### ç«¯ç‚¹é…ç½®æ ‡ç­¾é¡µ

#### å¿«é€Ÿé…ç½®åŒºåŸŸ
- **ç«¯ç‚¹åœ°å€è¾“å…¥æ¡†**: æ”¯æŒåˆ†å·(`;`)åˆ†éš”çš„å¤šåœ°å€è¾“å…¥
  ```
  ç¤ºä¾‹: https://api1.example.com;https://api2.example.com;https://api3.example.com
  ```
- **è·å–é»˜è®¤åœ°å€æŒ‰é’®**: ä»æ’ä»¶è·å–é¢„è®¾çš„é»˜è®¤ç«¯ç‚¹åœ°å€
- **æµ‹è¯•è¿æ¥æŒ‰é’®**: æµ‹è¯•æ‰€æœ‰ç«¯ç‚¹çš„è¿æ¥æ€§

#### è¯¦ç»†é…ç½®åŒºåŸŸ
- **ç«¯ç‚¹è¡¨æ ¼**: æ˜¾ç¤ºæ‰€æœ‰ç«¯ç‚¹çš„è¯¦ç»†ä¿¡æ¯
  - åç§°ã€åœ°å€ã€æè¿°ã€ä¼˜å…ˆçº§ã€è¶…æ—¶æ—¶é—´
  - å¯ç”¨çŠ¶æ€ã€ç»Ÿè®¡ä¿¡æ¯ã€æ“ä½œæŒ‰é’®
- **æ·»åŠ /åˆ é™¤ç«¯ç‚¹**: æ‰‹åŠ¨ç®¡ç†ç«¯ç‚¹é…ç½®

### ç½‘ç»œè®¾ç½®æ ‡ç­¾é¡µ

#### é¢‘ç‡é™åˆ¶è®¾ç½®
- **å¯ç”¨é¢‘ç‡é™åˆ¶**: é˜²æ­¢è¯·æ±‚è¿‡äºé¢‘ç¹è¢«å°IP
- **æ¯åˆ†é’Ÿè¯·æ±‚æ•°**: è®¾ç½®è¯·æ±‚é¢‘ç‡ä¸Šé™
- **è¯·æ±‚é—´éš”**: è®¾ç½®å•æ¬¡è¯·æ±‚é—´éš”æ—¶é—´

#### é‡è¯•è®¾ç½®  
- **é‡è¯•æ¬¡æ•°**: è¯·æ±‚å¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°
- **é‡è¯•å»¶è¿Ÿ**: é‡è¯•é—´éš”æ—¶é—´

#### HTTPè®¾ç½®
- **User-Agent**: è‡ªå®šä¹‰æµè§ˆå™¨æ ‡è¯†
- **è‡ªå®šä¹‰è¯·æ±‚å¤´**: JSONæ ¼å¼çš„é¢å¤–è¯·æ±‚å¤´

### ä»£ç†è®¾ç½®æ ‡ç­¾é¡µ

#### ä»£ç†é…ç½®
- **å¯ç”¨ä»£ç†**: å¼€å…³ä»£ç†åŠŸèƒ½
- **ä»£ç†åˆ—è¡¨**: æ”¯æŒå¤šç§ä»£ç†æ ¼å¼
  ```
  http://proxy.example.com:8080
  https://proxy.example.com:8080
  socks5://user:pass@proxy.example.com:1080
  ```
- **æµ‹è¯•ä»£ç†**: éªŒè¯ä»£ç†å¯ç”¨æ€§
- **å¯¼å…¥ä»£ç†**: ä»æ–‡ä»¶æ‰¹é‡å¯¼å…¥ä»£ç†åˆ—è¡¨

### ç»Ÿè®¡ä¿¡æ¯æ ‡ç­¾é¡µ

- **ç½‘ç»œç»Ÿè®¡**: æ˜¾ç¤ºè¯·æ±‚æ€»æ•°ã€æˆåŠŸç‡ã€å“åº”æ—¶é—´ç­‰
- **æ´»è·ƒç«¯ç‚¹**: å½“å‰å¯ç”¨çš„ç«¯ç‚¹æ•°é‡
- **ä»£ç†çŠ¶æ€**: ä»£ç†ä½¿ç”¨æƒ…å†µ
- **å®æ—¶åˆ·æ–°**: è·å–æœ€æ–°ç»Ÿè®¡æ•°æ®

---

## ğŸ”§ é«˜çº§é…ç½®

### 1. ä¸ºæ’ä»¶æ·»åŠ ç½‘ç»œé…ç½®æ”¯æŒ

è¦è®©æ’ä»¶æ”¯æŒç½‘ç»œé…ç½®ï¼Œéœ€è¦å®ç°`INetworkConfigurable`æ¥å£ï¼š

```python
from core.network.universal_network_config import INetworkConfigurable, NetworkEndpoint, PluginNetworkConfig

class YourPlugin(INetworkConfigurable):
    def get_default_endpoints(self) -> List[NetworkEndpoint]:
        """è·å–é»˜è®¤ç½‘ç»œç«¯ç‚¹é…ç½®"""
        return [
            NetworkEndpoint(
                name="primary_api",
                url="https://api.example.com",
                description="ä¸»è¦APIç«¯ç‚¹",
                priority=10,
                timeout=30
            ),
            NetworkEndpoint(
                name="backup_api", 
                url="https://backup.example.com",
                description="å¤‡ç”¨APIç«¯ç‚¹",
                priority=8,
                timeout=30
            )
        ]
    
    def get_network_config_schema(self) -> Dict[str, Any]:
        """è·å–ç½‘ç»œé…ç½®æ¶æ„"""
        return {
            "endpoints": {
                "title": "æ•°æ®ç«¯ç‚¹",
                "description": "APIæ•°æ®è·å–ç«¯ç‚¹",
                "categories": {
                    "primary": "ä¸»è¦ç«¯ç‚¹",
                    "backup": "å¤‡ç”¨ç«¯ç‚¹"
                }
            },
            "rate_limit": {
                "title": "é¢‘ç‡é™åˆ¶",
                "description": "è¯·æ±‚é¢‘ç‡æ§åˆ¶è®¾ç½®",
                "default_requests_per_minute": 60,
                "default_request_delay": 1.0
            }
        }
    
    def apply_network_config(self, config: PluginNetworkConfig) -> bool:
        """åº”ç”¨ç½‘ç»œé…ç½®"""
        try:
            # åº”ç”¨é…ç½®åˆ°æ’ä»¶
            # æ›´æ–°ç«¯ç‚¹ã€ä»£ç†ã€é¢‘ç‡é™åˆ¶ç­‰
            return True
        except Exception as e:
            return False
```

### 2. æ‰‹åŠ¨æ³¨å†Œæ’ä»¶

```python
from core.network.plugin_network_registry import get_plugin_network_registry

registry = get_plugin_network_registry()
success = registry.register_plugin_network_config(
    plugin_id="your.plugin.id",
    plugin_name="æ‚¨çš„æ’ä»¶åç§°", 
    plugin_instance=your_plugin_instance
)
```

### 3. ç¨‹åºåŒ–ç®¡ç†ç½‘ç»œé…ç½®

```python
from core.network.universal_network_config import get_universal_network_manager

manager = get_universal_network_manager()

# è·å–æ’ä»¶é…ç½®
config = manager.get_plugin_config("plugin_id")

# æ›´æ–°ç«¯ç‚¹åœ°å€
endpoints_str = "https://api1.com;https://api2.com;https://api3.com"
manager.update_endpoints_from_string("plugin_id", endpoints_str)

# è·å–ç«¯ç‚¹å­—ç¬¦ä¸²
endpoints = manager.get_endpoints_as_string("plugin_id")

# å‘èµ·ç½‘ç»œè¯·æ±‚
response = manager.make_request("plugin_id", "GET", url="https://api.example.com/data")
```

---

## ğŸ“Š ç›‘æ§å’Œè¯Šæ–­

### 1. æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

```python
from core.network.plugin_auto_register import get_network_config_summary

summary = get_network_config_summary()
print(f"å·²æ³¨å†Œæ’ä»¶: {summary['network_stats']['total_plugins']}")
print(f"æ€»ç«¯ç‚¹æ•°: {summary['network_stats']['total_endpoints']}")
```

### 2. æµ‹è¯•æ‰€æœ‰æ’ä»¶è¿æ¥

```python
from core.network.plugin_auto_register import get_plugin_auto_register

auto_register = get_plugin_auto_register()
test_results = auto_register.test_all_plugin_connections()

for plugin_id, result in test_results.items():
    if result['success']:
        print(f"âœ“ {plugin_id}: {result['available_endpoints']}/{result['tested_endpoints']} ç«¯ç‚¹å¯ç”¨")
    else:
        print(f"âœ— {plugin_id}: {result['error']}")
```

### 3. åº”ç”¨å…¨å±€è®¾ç½®

```python
# ä¸ºæ‰€æœ‰æ’ä»¶åº”ç”¨ä»£ç†è®¾ç½®
global_settings = {
    'proxy_enabled': True,
    'proxy_list': ['proxy1.com:8080', 'proxy2.com:8080'],
    'rate_limit_enabled': True,
    'requests_per_minute': 30,
    'request_delay': 2.0
}

auto_register = get_plugin_auto_register()
results = auto_register.apply_global_network_settings(global_settings)
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ’ä»¶æœªæ˜¾ç¤ºç½‘ç»œé…ç½®æ ‡ç­¾é¡µ
**åŸå› **: æ’ä»¶æœªå®ç°`INetworkConfigurable`æ¥å£æˆ–æ³¨å†Œå¤±è´¥
**è§£å†³**: 
- æ£€æŸ¥æ’ä»¶æ˜¯å¦ç»§æ‰¿äº†`INetworkConfigurable`
- æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ä¸­çš„æ³¨å†Œä¿¡æ¯
- æ‰‹åŠ¨è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯

#### 2. ç«¯ç‚¹åœ°å€æ— æ³•ä¿å­˜
**åŸå› **: é…ç½®æ–‡ä»¶æƒé™é—®é¢˜æˆ–è·¯å¾„ä¸å­˜åœ¨  
**è§£å†³**:
- ç¡®ä¿`config/network/`ç›®å½•å­˜åœ¨ä¸”å¯å†™
- æ£€æŸ¥æ–‡ä»¶æƒé™è®¾ç½®
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—è¯¦ç»†ä¿¡æ¯

#### 3. ä»£ç†æµ‹è¯•å¤±è´¥
**åŸå› **: ä»£ç†åœ°å€æ ¼å¼é”™è¯¯æˆ–ä»£ç†æœåŠ¡å™¨ä¸å¯ç”¨
**è§£å†³**:
- éªŒè¯ä»£ç†åœ°å€æ ¼å¼ï¼š`http://proxy:port`
- æµ‹è¯•ä»£ç†æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œ
- æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

#### 4. è¯·æ±‚é¢‘ç‡é™åˆ¶è¿‡ä¸¥
**åŸå› **: é¢‘ç‡é™åˆ¶è®¾ç½®è¿‡ä½
**è§£å†³**:
- è°ƒæ•´"è¯·æ±‚é—´éš”"å’Œ"æ¯åˆ†é’Ÿè¯·æ±‚æ•°"è®¾ç½®
- ä¸ºé‡è¦æ’ä»¶é…ç½®ä»£ç†ç»•è¿‡é™åˆ¶
- æ ¹æ®æ•°æ®æºç‰¹æ€§è°ƒæ•´é¢‘ç‡

### æ—¥å¿—æŸ¥çœ‹

ç³»ç»Ÿæ—¥å¿—è®°å½•åœ¨åº”ç”¨æ—¥å¿—ä¸­ï¼Œå…³é”®å­—æ®µï¼š
- `[INFO] æ³¨å†Œæ’ä»¶ç½‘ç»œé…ç½®æˆåŠŸ`ï¼šæ’ä»¶æ³¨å†ŒæˆåŠŸ
- `[WARNING] è¯·æ±‚é¢‘ç‡å—é™`ï¼šè§¦å‘é¢‘ç‡é™åˆ¶
- `[ERROR] ç½‘ç»œé…ç½®åº”ç”¨å¤±è´¥`ï¼šé…ç½®åº”ç”¨é”™è¯¯

### é…ç½®æ–‡ä»¶ä½ç½®

- ç½‘ç»œé…ç½®ï¼š`config/network/{plugin_id}_network.json`
- TDXæœåŠ¡å™¨ï¼š`database/tdx_server_manager.db`
- åº”ç”¨æ—¥å¿—ï¼šæŸ¥çœ‹åº”ç”¨æ—¥å¿—è¾“å‡º

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ç«¯ç‚¹é…ç½®å»ºè®®
- **ä¸»è¦ç«¯ç‚¹**: ä¼˜å…ˆçº§è®¾ä¸º10ï¼Œè¶…æ—¶30ç§’
- **å¤‡ç”¨ç«¯ç‚¹**: ä¼˜å…ˆçº§è®¾ä¸º8ï¼Œè¶…æ—¶45ç§’  
- **æµ‹è¯•ç«¯ç‚¹**: ä¼˜å…ˆçº§è®¾ä¸º5ï¼Œä»…ç”¨äºæµ‹è¯•

### 2. é¢‘ç‡é™åˆ¶å»ºè®®
- **AkShare**: 20æ¬¡/åˆ†é’Ÿï¼Œ2ç§’é—´éš”ï¼ˆé¿å…IPå°ç¦ï¼‰
- **ä¸œæ–¹è´¢å¯Œ**: 60æ¬¡/åˆ†é’Ÿï¼Œ1ç§’é—´éš”ï¼ˆAPIé™åˆ¶è¾ƒæ¾ï¼‰
- **TDX**: æ— é™åˆ¶ï¼ˆç§æœ‰åè®®ï¼‰
- **åŠ å¯†è´§å¸**: æ ¹æ®äº¤æ˜“æ‰€é™åˆ¶è°ƒæ•´

### 3. ä»£ç†ä½¿ç”¨å»ºè®®
- ä¸ºé«˜é¢‘è¯·æ±‚æ’ä»¶é…ç½®ä»£ç†æ± 
- å®šæœŸæµ‹è¯•ä»£ç†å¯ç”¨æ€§
- ä»£ç†å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ç›´è¿

### 4. ç›‘æ§å’Œç»´æŠ¤
- å®šæœŸæŸ¥çœ‹ç½‘ç»œç»Ÿè®¡ä¿¡æ¯
- ç›‘æ§ç«¯ç‚¹æˆåŠŸç‡å’Œå“åº”æ—¶é—´
- æ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒæ•´é…ç½®

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥åº”ç”¨å¯åŠ¨å’Œè¿è¡Œæ—¥å¿—
2. **è¿è¡Œæµ‹è¯•**: æ‰§è¡Œ`test_universal_network_config.py`è„šæœ¬
3. **æ£€æŸ¥é…ç½®**: éªŒè¯æ’ä»¶æ˜¯å¦æ­£ç¡®å®ç°æ¥å£
4. **é‡æ–°åˆå§‹åŒ–**: é‡å¯åº”ç”¨æˆ–æ‰‹åŠ¨é‡æ–°åˆå§‹åŒ–

ç³»ç»Ÿè®¾è®¡ä¸ºé«˜åº¦å¯æ‰©å±•å’Œå®¹é”™ï¼Œå¤§å¤šæ•°é—®é¢˜å¯ä»¥é€šè¿‡é‡æ–°é…ç½®è§£å†³ã€‚

---

## ğŸ†• ç‰ˆæœ¬æ›´æ–°

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… é€šç”¨ç½‘ç»œé…ç½®ç®¡ç†å™¨
- âœ… ç»Ÿä¸€é…ç½®UIç•Œé¢
- âœ… è‡ªåŠ¨æ’ä»¶æ³¨å†Œæœºåˆ¶
- âœ… AkShareå’Œä¸œæ–¹è´¢å¯Œæ’ä»¶æ”¯æŒ
- âœ… TDXæœåŠ¡å™¨ç®¡ç†é›†æˆ
- âœ… å®Œæ•´çš„æµ‹è¯•æ¡†æ¶

### æœªæ¥è®¡åˆ’
- ğŸ”„ æ›´å¤šæ•°æ®æºæ’ä»¶æ”¯æŒ
- ğŸ“Š æ›´è¯¦ç»†çš„ç½‘ç»œç›‘æ§
- ğŸ”’ å®‰å…¨è®¤è¯ç®¡ç†
- ğŸŒ åˆ†å¸ƒå¼é…ç½®ç®¡ç†

---

**æ­å–œï¼æ‚¨ç°åœ¨å·²ç»æŒæ¡äº†é€šç”¨ç½‘ç»œé…ç½®ç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•ã€‚å¼€å§‹äº«å—ç»Ÿä¸€ã€æ™ºèƒ½çš„ç½‘ç»œé…ç½®ç®¡ç†ä½“éªŒå§ï¼** ğŸ‰
