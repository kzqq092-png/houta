# YS-Quant‌ 图形界面使用指南

## 界面总览

YS-Quant‌采用专业量化交易软件标准布局，分为五个主要区域：

1. **左侧面板**：股票列表、搜索筛选、指标管理
2. **中间面板**：K线图表、周期切换、图表工具
3. **右侧面板**：多维分析、策略回测、参数设置
4. **底部面板**：日志区域、系统状态
5. **顶部菜单/工具栏**：全局操作和设置

![界面布局示意图]

## 主要特性

- **多标签页异步分析**：所有分析在后台线程执行，不阻塞主界面
- **渐进式加载**：大数据量时分阶段显示内容，主图优先显示
- **多维度分析**：技术指标、趋势、形态、波浪、情绪等多方面分析
- **高级交互**：缩放、拖拽、十字光标、区间统计、形态高亮
- **状态恢复**：所有分析按钮均支持防卡死机制，分析结束或异常后自动恢复可用
- **智能主题**：支持明亮/暗黑主题切换，适应不同使用场景

## 2024最新优化

- **性能大幅提升**：主图渲染速度提升60-80%，UI响应更流畅
- **全局修复渲染冲突**：解决了QWidget::paintEngine相关警告，图表控件和matplotlib嵌入控件完美兼容
- **智能线程管理**：根据系统配置动态调整线程池，提升多核CPU利用率
- **渐进式加载**：分阶段加载图表内容，关键信息优先显示
- **统一指标系统**：技术指标系统升级到V3版本，数据库驱动架构更灵活高效

## 操作指南

### 基础操作

1. **选择股票**：
   - 左侧面板股票列表中点击股票
   - 搜索框输入股票代码或名称
   - 高级搜索进行多维筛选

2. **图表操作**：
   - 鼠标滚轮：缩放图表
   - 左键拖拽：平移图表
   - 右键菜单：额外功能（导出、标记等）
   - 十字光标：显示详细价格信息

3. **周期切换**：
   - 点击中间面板顶部的周期按钮（分钟/日/周/月）
   - 自定义周期通过设置对话框配置

4. **指标添加**：
   - 左侧面板指标列表选择
   - 中间面板工具栏"添加指标"按钮
   - 右键菜单"添加指标"选项

### 高级功能

1. **多屏模式**：
   - 点击中间面板工具栏的"多屏"按钮
   - 从左侧拖拽股票到不同图表区域
   - 多屏同步/独立模式切换

2. **策略回测**：
   - 右侧面板切换到"回测"标签
   - 选择策略类型和参数
   - 点击"开始回测"按钮
   - 查看回测结果和绩效统计

3. **形态分析**：
   - 右侧面板切换到"形态"标签
   - 点击"开始分析"按钮
   - 表格显示识别到的形态
   - 点击表格行高亮对应K线

4. **导出功能**：
   - 图表导出：右键菜单"导出图片"
   - 数据导出：菜单栏"工具"->"导出数据"
   - 回测报告：右侧面板回测结果区"导出报告"

## 右键菜单功能

- **保存图表为图片**：一键保存当前K线图为PNG/JPG/PDF
- **导出K线/指标数据**：导出当前K线及所有指标为CSV
- **添加/隐藏指标**：快速弹出指标选择对话框，或一键清空所有指标
- **区间统计**：统计选定区间涨跌幅、均值、最大回撤等
- **标记/高亮K线**：高亮关键K线，辅助形态/信号分析
- **复制图表**：复制当前图表到剪贴板
- **刷新图表**：强制刷新当前图表内容
- **清空高亮**：清除所有高亮和标记

## 界面优化建议

如果你正在使用YS-Quant‌并希望进一步优化体验，这里有一些建议：

1. **硬件配置**：
   - 推荐16GB+内存，8核+CPU，SSD硬盘
   - 最低配置：8GB内存，4核CPU

2. **性能优化**：
   - 大数据量时启用渐进式加载
   - 调整更新节流间隔适应硬件性能
   - 缓存设置根据内存大小调整

3. **界面设置**：
   - 根据显示器大小调整面板比例
   - 选择适合环境的主题（明亮/暗黑）
   - 配置常用指标组合，减少重复操作

## 开发注意事项

如果你正在开发或扩展YS-Quant‌，请注意以下几点：

1. 所有QWidget及其子类（如QTableWidgetItem）必须在主线程创建和操作
2. 子线程只做数据计算，结果通过信号发回主线程，由主线程更新UI
3. 自定义指标或UI组件，务必统一用self.main_layout管理布局，避免直接用self.layout
4. 新指标或趋势分析方法，参考兼容写法，优先判断数据类型，保证健壮性
5. 新增分析Tab或按钮，均建议统一用set_kdata同步数据，内部分析逻辑统一用self.current_kdata

## 故障排除

1. **主图渲染慢**：
   - 检查内存使用情况，考虑增加内存
   - 启用渐进式加载：`chart_widget.enable_progressive_loading(True)`
   - 减少同时显示的指标数量

2. **数据加载卡顿**：
   - 使用异步数据加载方法
   - 启用数据预加载功能
   - 检查网络连接状态

3. **界面响应慢**：
   - 调整更新节流间隔：`renderer.set_throttle_interval(200)`
   - 关闭不必要的实时更新功能
   - 清理缓存：`data_manager.clear_cache()`

4. **按钮无法点击**：
   - 检查是否有长时间运行的任务
   - 查看日志区是否有错误信息
   - 尝试重启应用程序

## 功能对标与发展路线

| 功能类别 | 已有功能 | 规划中功能 |
|------------------|------------------------------------------|------------------------------------------|
| K线/分时图 | 多周期K线、指标叠加、缩放、十字光标 | 历史回放、更多图表类型、绘图工具 |
| 指标系统 | 内置指标库、参数调节、指标叠加 | 自定义指标编辑器、指标组合管理 |
| 形态分析 | 经典K线形态识别、置信度、形态高亮 | 形态信号回测、形态筛选工具 |
| 策略回测 | 策略编辑、历史回测、绩效统计 | 参数优化、多策略对比、回测报告生成 |
| 多维分析 | 趋势分析、波浪分析、资金流向 | 市场情绪指标、热点轮动分析、板块联动 |
| 智能辅助 | 条件筛选、自动提示 | 智能选股、AI形态解读、策略推荐 |

## 联系与反馈

如遇到界面问题或有改进建议，欢迎通过以下方式反馈：

- 提交GitHub Issues
- 社区论坛讨论
- 邮件联系支持团队

我们致力于不断改进YS-Quant‌的用户体验，感谢您的宝贵意见！
